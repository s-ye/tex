\documentclass[12pt]{article}
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{bookmark}
\usepackage{tikz}
\usepackage{/Users/songye03/Desktop/math_tex/style/quiver}
\usepackage{/Users/songye03/Desktop/math_tex/style/scribe}
\usepackage{fancyhdr}

\usepackage{parskip} % Automatically respects blank lines
\usepackage{booktabs} % For \addlinespace command
\setlength{\parskip}{1em} % Adds more space between paragraphs
\setlength{\parindent}{0pt} % Removes paragraph indentation

\begin{document}


\lhead{Songyu Ye}
\rhead{\today}
\cfoot{\thepage}

\title{Equivariant Derived Categories of Coherent Sheaves}

\author{Songyu Ye}
\date{\today}
\maketitle


\begin{abstract}
  Notes for a talk I'm giving on equivariant derived categories of coherent sheaves.
\end{abstract}

\tableofcontents

\section{Preliminaries on GIT}
\subsection{Generalities on GIT quotients}
Let $X \subset \mathbb{P}^n$ be a projective variety, and let $\widetilde{X} \subset \mathbb{C}^{n+1}$ be the corresponding affine cone.
Since $X$ is the space of lines in $\widetilde{X}$, it has a tautological line bundle
\[
  \mathcal{O}_X(-1) = \mathcal{O}_{\mathbb{P}^n}(-1)\big|_X
\]
over it whose fibre over a point in $X$ is the corresponding line in
$\widetilde{X} \subset \mathbb{C}^{n+1}$. The total space of $\mathcal{O}_X(-1)$ therefore
has a tautological map to $\widetilde{X}$ which is an isomorphism away from the zero section
$X \subset \mathcal{O}_X(-1)$, which is all contracted down to the origin in $\widetilde{X}$.
In fact the total space of $\mathcal{O}_X(-1)$ is the \textbf{blow up} of $\widetilde{X}$ in the origin.

Linear functions on $\mathbb{C}^{n+1}$ like $x_i$, restricted to $\widetilde{X}$ and pulled
back to the total space of $\mathcal{O}_X(-1)$, give functions which are linear on the fibres,
so correspond to sections of the \textbf{dual} line bundle $\mathcal{O}_X(1)$. Similarly degree $k$
homogeneous polynomials on $\widetilde{X}$ define functions on the total space of $\mathcal{O}_X(-1)$
which are of degree $k$ on the fibres, and so give sections of the $k$th tensor power
$\mathcal{O}_X(k)$ of the dual of the line bundle $\mathcal{O}_X(-1)$.

So the grading that splits the functions on $\widetilde{X}$ into homogeneous degree
(or $\mathbb{C}^*$-weight spaces) corresponds to sections of different line bundles $\mathcal{O}_X(k)$
on $X$. So
\[
  \bigoplus_{k \ge 0} H^0(\mathcal{O}_X(k))
\]
considered a graded ring by tensoring sections
$\mathcal{O}(k) \otimes \mathcal{O}(l) \cong \mathcal{O}(k+l)$. For the line bundle $\mathcal{O}_X(1)$
sufficiently positive, this ring will be generated in degree one. It is often called the
(homogeneous) coordinate ring of the \textbf{polarised} (i.e.~endowed with an ample line bundle)
variety $(X,\mathcal{O}_X(1))$.

The degree one restriction is for convenience and can be dropped (by working with varieties
in weighted projective spaces), or bypassed by replacing $\mathcal{O}_X(1)$ by $\mathcal{O}_X(p)$,
i.e.~using the ring
\[
  R^{(p)} = \bigoplus_{k \ge 0} R_{kp}; \qquad \text{for $p \gg 0$ this will be generated by its degree one piece $R_p$.}
\]
The choice of generators of the ring is what gives the embedding in projective space. In fact
the sections of any line bundle $L$ over $X$ define a (rational) map
\begin{equation} \label{eq:map}
  X \dashrightarrow \mathbb{P}\big(H^0(X,L)^*\big),
  \qquad
  x \mapsto ev_x,
  \quad
  ev_x(s) := s(x),
\end{equation}
which in coordinates maps $x$ to $(s_0(x):\cdots:s_n(x)) \in \mathbb{P}^n$, where $s_i$ form a basis for $H^0(L)$. This map is only defined for those $x$ with $ev_x \neq 0$,
i.e.~for which $s(x)$ is not zero for every $s$.

Now suppose we are in the following situation, of $G$ acting on a projective variety
$X$ through $SL$ transformations of the projective space.
\[
  \begin{tikzcd}
    G \arrow[d] & \curvearrowright & X \arrow[d,hook] \\
    SL(n+1,\mathbb{C}) & \curvearrowright & \mathbb{P}^n
  \end{tikzcd}
\]
Since we have assumed that $G$ acts through $SL(n+1,\mathbb{C})$, the action lifts from $X$ to one covering it on $\mathcal{O}_X(-1)$. In other words we don't just act on the projective space (and $X$ therein)
but on the vector space overlying it (and the cone $\widetilde{X}$ on $X$ therein). This
is called a \textbf{linearisation} of the action. Thus $G$ acts on each
$H^0(\mathcal{O}_X(r))$.

Then, just as $(X,\mathcal{O}_X(1))$ is determined by its graded ring of sections of
$\mathcal{O}(r)$ (i.e.~the ring of functions on $\widetilde{X}$),
\[
  (X,\mathcal{O}(1)) \;\longleftrightarrow\; \bigoplus_r H^0(X,\mathcal{O}(r))
\]
we simply \textbf{construct} $X/G$ (with a line bundle on it) from the ring of
\textbf{invariant} sections:
\[
  X/G \;\longleftrightarrow\; \bigoplus_r H^0(X,\mathcal{O}(r))^G
\]
This is sensible, since if there is a good quotient then functions on it pullback to give
$G$-invariant functions on $X$, i.e.~functions constant on the orbits, the fibres of
$X \to X/G$. For it to work we need:
\begin{lemma}
  $\bigoplus_r H^0(X,\mathcal{O}(r))^G$ is finitely generated.
\end{lemma}

\begin{proof}
  Since $R := \bigoplus_r H^0(X,\mathcal{O}(r))$ is Noetherian, Hilbert’s basis theorem tells
  us that the ideal $R\cdot \big(\bigoplus_{r>0} H^0(X,\mathcal{O}(r))^G\big)$ generated by
  $R^G_{+} := \bigoplus_{r>0} H^0(X,\mathcal{O}(r))^G$ is generated by a finite number of
  elements $s_0,\ldots,s_k \in R^G_{+}$.

  Thus any element $s \in H^0(X,\mathcal{O}(r))^G$, $r>0$, may be written
  $s = \sum_{i=0}^k f_i s_i$ for some $f_i \in R$ of degree $<r$. To show that the $s_i$
  generate $R^G_{+}$ as an algebra we must show that the $f_i$ can be taken to lie in $R^G$.

  We now use the fact that $G$ is the complexification of the compact group $K$. Since
  $K$ has an invariant metric, we can average over it and use the facts that $s$ and $s_i$
  are invariant to give
  \[
    s = \sum_{i=0}^k \operatorname{Av}(f_i)\, s_i,
  \]
  where $\operatorname{Av}(f_i)$ is the ($K$-invariant) $K$-average of $f_i$. By complex
  linearity $\operatorname{Av}(f_i)$ is also $G$-invariant (for instance, since $G$ has a
  polar decomposition $G = K \exp(i\mathfrak{t})$). The $\operatorname{Av}(f_i)$ are also of
  degree $<r$, and so we may assume, by an induction on $r$, that we have already shown that
  they are generated by the $s_i$ in $R^G_{+}$. Thus $s$ is also.
\end{proof}

\begin{definition}[Projective GIT quotient]
  Let $X$ be a projective variety with an action of a reductive group $G$ linearised by a line bundle $\mathcal{O}_X(1)$. We define $X/G$ to be
  \[
    \operatorname{Proj}\, \bigoplus_r H^0(X,\mathcal{O}(r))^G.
  \]
\end{definition}
If $X$ is a variety (rather than a scheme) then so is $X/G$, as its graded ring sits inside
that of $X$ and so has no zero divisors.

\begin{definition}[Affine GIT quotient]
  Let $X = \operatorname{Spec} R$ be an affine variety with an action of a reductive group $G$. We define the affine GIT quotient $X/G$ to be $\operatorname{Spec}(R^G)$, where $R^G$ is the ring of $G$-invariant regular functions on $X$.
\end{definition}
In some cases, this does not work so well. For instance, under the scalar action of
$\mathbb{C}^*$ on $\mathbb{C}^{n+1}$ the only invariant polynomials in
$\mathbb{C}[x_0,\dots,x_n]$ are the constants and this recipe for the quotient gives a
single point. In the language of the next section, this is because there are no stable
points in this example, and all semistable orbits’ closures intersect (or equivalently,
there is a unique polystable point, the origin). More generally in any affine case all
points are always at least semistable (as the constants are always $G$-invariant functions)
and so no orbits gets thrown away in making the quotient (though many may get identified
with each other — those whose closures intersect which therefore cannot be separated
by invariant functions). But for the scalar action of $\mathbb{C}^*$ on $\mathbb{C}^{n+1}$
we clearly need to remove at least the origin to get a sensible quotient.

So we should change the linearisation, from the trivial linearisation to a nontrivial one, to get a bigger quotient. This is demonstrarted in the following example.

\begin{example}[Projective space as a GIT quotient]
  Consider the trivial line bundle on $\mathbb{C}^{n+1}$ but with a nontrivial
  linearisation, by composing the $\mathbb{C}^*$-action on $\mathbb{C}^{n+1}$ by a character
  $\lambda \mapsto \lambda^{p}$ of $\mathbb{C}^*$ acting on the fibres of the trivial line
  bundle over $\mathbb{C}^{n+1}$. The invariant sections of this no longer form a ring; we
  have to take the direct sum of spaces of sections of \textbf{all powers} of this linearisation,
  just as in the projective case, and take $\operatorname{Proj}$ of the invariants of the
  resulting graded ring.

  We calculate the invariant sections for general p. Look at the $k$-th tensor power of the linearised line bundle. Sections are homogeneous polynomials $f(x_0,\dots,x_n)$ of some degree. Under $\lambda$, such an $f$ transforms as
  \[
    f(x_0,\dots,x_n) \mapsto f(\lambda x_0,\dots,\lambda x_n) = \lambda^d f(x_0,\dots,x_n),
  \]
  where $d=\deg f$.

  But the linearisation introduces an extra factor $\lambda^{-pk}$ when we act on the fibre of the $k$-th tensor power. By definition, the $G$-action on a section $s$ is
  \[
    (g\cdot s)(x) \;=\; g\cdot \big(s(g^{-1}\cdot x)\big).
  \]
  Take a polynomial $f$ homogeneous of degree $d$. View the section as
  \[s(x) = f(x)\cdot e\]
  where $e$ is a trivialising section of the fibre. When we apply the group action:
  \[
    (g\cdot s)(x) = g\cdot(f(g^{-1}\cdot x)\cdot e)
    = \big(\lambda^{-d} f(x)\big)\cdot \lambda^{pk} e
    = \lambda^{-d+pk} f(x)\cdot e.
  \]
  For invariance, we need the weight to vanish, i.e.
  \[
    d = pk.
  \]
  So only polynomials of degree exactly $pk$ survive as invariants in the degree $k$ graded piece.

  If $p<0$ then there are no invariant sections and the quotient is empty. We have seen that
  for $p=0$ the quotient is a single point. For $p>0$ the invariant sections of the $k$th
  power of the linearisation are the homogeneous polynomials on $\mathbb{C}^n$ of degree $kp$.
  So for $p=1$ we get the quotient
  \begin{equation}
    \mathbb{C}^{n+1}/\mathbb{C}^*
    = \operatorname{Proj} \bigoplus_{k\ge 0} \big(\mathbb{C}[x_0,\dots,x_n]_k\big)
    = \operatorname{Proj} \mathbb{C}[x_0,\dots,x_n] = \mathbb{P}^n.
  \end{equation}
  For $p\ge 1$ we get the same geometric quotient but with the line bundle
  $\mathcal{O}(p)$ on it instead of $\mathcal{O}(1)$.

  Another way to derive this is to embed $\mathbb{C}^{n+1}$ in $\mathbb{P}^{n+1}$ as
  $x_{n+1}=1$, act by $\mathbb{C}^*$ on the latter by
  $\operatorname{diag}(\lambda,\dots,\lambda,\lambda^{-(n+1)}) \in SL(n+2,\mathbb{C})$,
  and do projective GIT. This gives, on restriction to $\mathbb{C}^{n+1} \subset \mathbb{P}^{n+1}$,
  the $p=n+1$ linearisation above. The invariant sections of $\mathcal{O}((n+2)k)$ are of the form
  $x_{n+1}^k f$, where $f$ is a homogeneous polynomial of degree $(n+1)k$ in $x_1,\dots,x_n$.
  Therefore the quotient is
  \[
    \operatorname{Proj} \bigoplus_{k\ge 0}
    \big(\mathbb{C}[x_1,\dots,x_n]_{(n+1)k}\big) = \operatorname{Proj} \big(\mathbb{C}[x_1,\dots,x_n],\mathcal{O}(n+1)\big).
  \]
\end{example}


\begin{definition}[Semistable points]
  A point $x \in X$ is \textbf{semistable} iff there exists
  $s \in H^0(X,\mathcal{O}(r))^G$ with $r>0$ such that $s(x) \neq 0$. Points which are not
  semistable are \textbf{unstable}.
\end{definition}
So semistable points are those that the $G$-invariant functions "see." The map \begin{align*}
  X^{ss} & \to \P(H^0(X,\mathcal{O}(r))^G)^* \\
  x      & \mapsto ev_x
\end{align*} is well defined on the (Zariski open, though possibly empty) locus $X^{ss} \subseteq X$ of semistable points, and it is clearly constant on $G$-orbits,
i.e.~it factors through the set-theoretic quotient $X^{ss}/G$. But it may contract more
than just $G$-orbits, so we need another definition.

\begin{definition}[Stable points]
  A semistable point $x$ is \textbf{stable} if and only if
  $\bigoplus_r H^0(X,\mathcal{O}(r))^G$ separates orbits near $x$ and the stabiliser of $x$ is finite.
\end{definition}




\subsection{Relevant example}
We recall the basic set-up of Geometric Invariant Theory (GIT) quotients relevant to our situation.

Let $V = \mathbb{C}^4$ with coordinates $x_1,x_2,y_1,y_2$ and consider the $\mathbb{C}^*$-action given by
\[
  t\cdot(x_1,x_2,y_1,y_2)=(t x_1, t x_2, t^{-1}y_1, t^{-1}y_2)
\]
We linearize this action by a character $\chi_m:t\mapsto t^m$ with $m\in\mathbb{Z}\setminus\{0\}$. Since $V$ is affine, the GIT quotient for $\chi_m$ is $\mathrm{Proj}\,R^{(m)}$, where
\[
  R^{(m)}=\bigoplus_{d\ge 0} \Gamma(V,\mathcal{O}_V)^{\mathbb{C}^*,\,\chi_m^{\otimes d}}=\bigoplus_{d\ge 0}\{\,f\in\mathbb{C}[x_1,x_2,y_1,y_2]\mid t\cdot f = t^{md} f\,\}
\]
In other words, $R^{(m)}_d$ is spanned by monomials whose total $\mathbb{C}^*$-weight is $md$, where the weight of a monomial $x_1^{a_1}x_2^{a_2}y_1^{b_1}y_2^{b_2}$ is $w=a_1+a_2-(b_1+b_2)$.

A point $v\in V$ is $\chi_m$-semistable iff there exists $d>0$ and $f\in R^{(m)}_d$ with $f(v)\ne 0$.

Here $R^{(m)}_d$ consists of polynomials whose monomials have positive weight $w=md>0$. Such a monomial must contain at least one $x$ (indeed, more $x$'s than $y$'s), so it vanishes at any point with $x_1=x_2=0$. Therefore no section in $R^{(m)}_d$ can be nonzero at a point with $x_1=x_2=0$ $\Rightarrow$ those points are unstable.

Conversely, if $(x_1,x_2)\neq(0,0)$, then pick $d$ and the monomial
$f=x_i^{md}$ with $x_i\neq 0$. It has weight $md$ and $f(v)\neq 0$, so $v$ is semistable.

Therefore, for $m>0$,
\[
  V^{ss}(\chi_m)=V\setminus\{x_1=x_2=0\}.
\]
The quotient is $(V\setminus\{x_1=x_2=0\})/\mathbb{C}^*$, i.e. the total space of $\mathcal{O}(-1)^{\oplus 2}\to\mathbb{P}^1_{[x_1:x_2]}$. Similarly, for $m<0$, we have
\[
  V^{ss}(\chi_m)=V\setminus\{y_1=y_2=0\}.
\]
The quotient is $(V\setminus\{y_1=y_2=0\})/\mathbb{C}^*$, i.e. the total space of $\mathcal{O}(-1)^{\oplus 2}\to\mathbb{P}^1_{[y_1:y_2]}$.

\subsection{Quotient stack}
Let $\mathcal{S}$ be a category and $p:\mathcal{X}\to\mathcal{S}$ be a functor of categories.
We visualize this data as
\[
  \begin{tikzcd}
    \mathcal{X} \arrow[d, "p"'] & a \arrow[r, "\alpha"] \arrow[d] & b \arrow[d] \\
    \mathcal{S} & S \arrow[r, "f"'] & T
  \end{tikzcd}
\]
where the lower case letters $a,b$ are objects of $\mathcal{X}$ and the upper case letters $S,T$
are objects of $\mathcal{S}$. We say that $a$ is over $S$ and that a morphism $\alpha: a\to b$ is
over $f:S\to T$.

\begin{definition}[Prestacks]\label{def:prestacks}
  A functor $p:\mathcal{X}\to\mathcal{S}$ is a \textbf{prestack over a category $\mathcal{S}$} if
  \begin{enumerate}
    \item[(1)] (\textbf{pullbacks exist}) for every diagram
          \[
            \begin{tikzcd}
              a \arrow[d] \arrow[r, dashed] & b \arrow[d] \\
              S \arrow[r] & T
            \end{tikzcd}
          \]
          of solid arrows, there exists a morphism $a\to b$ over $S\to T$; and

    \item[(2)] (\textbf{universal property for pullbacks}) for every diagram
          \[
            \begin{tikzcd}
              a \arrow[d]
              \arrow[r, dashed]
              \arrow[rr, bend left=15] &
              b \arrow[d] \arrow[r] &
              c \arrow[d] \\
              R \arrow[r] & S \arrow[r] & T
            \end{tikzcd}
          \]
          of solid arrows, there exists a unique arrow $a\to b$ over $R\to S$ filling in the diagram.
  \end{enumerate}
  Prestacks are also referred to as \textbf{categories fibered in groupoids}.
\end{definition}

\begin{definition}[Fiber categories]\label{def:fibercat}
  If $\mathcal{X}$ is a prestack over $\mathcal{S}$, the \textbf{fiber category}
  $\mathcal{X}(S)$ over $S\in\mathcal{S}$ is the category of objects in $\mathcal{X}$ over $S$
  with morphisms over $\mathrm{id}_S$.
\end{definition}

Given an action of an algebraic group $G$ on a scheme $X$, the \textbf{quotient prestack} $[X/G]^{\mathrm{pre}}$ is the prestack whose fiber category
$[X/G]^{\mathrm{pre}}(S)$ over a scheme $S$ is the quotient groupoid (or the moduli groupoid of orbits) $[X(S)/G(S)]$
This will not satisfy the gluing axioms of a stack; even when the action is free,
the quotient functor $\mathrm{Sch} \to \mathrm{Sets}$ defined by $S \mapsto X(S)/G(S)$ is not a sheaf
in general. Put another way, we define:
\begin{definition}[Quotient prestacks]
  Let $G \to S$ be a smooth affine group scheme acting on a scheme $U$ over $S$.
  The \textbf{quotient prestack} $[U/G]^{\mathrm{pre}}$ of an action of a smooth affine group scheme $G \to S$
  on an $S$-scheme $U$ is the category over $\mathrm{Sch}/S$ consisting of pairs $(T,u)$ where $T$ is an $S$-scheme
  and $u \in U(T)$. An element $g \in G(T')$ acts by $(T',u') \to (T,u)$ via the data of a map $f:T'\to T$ of
  $S$-schemes and an element $g \in G(T')$ such that $f^*u = g \cdot u'$. Note that the fiber category
  $[U(T)/G(T)]$ is identified with the quotient groupoid.
\end{definition}
It turns out that the stackification of $[U/G]^{\mathrm{pre}}$ is the quotient stack $[U/G]$, hence the name is justified.

\begin{definition}[Quotient stacks]
  The \textbf{quotient stack} $[U/G]$ is the prestack over $\mathrm{Sch}/S$ consisting of diagrams
  \[
    \begin{tikzcd}
      P \arrow[r] \arrow[d] & U \\
      T
    \end{tikzcd}
  \]
  where $P \to T$ is a principal $G$-bundle and $P \to U$ is a $G$-equivariant morphism of $S$-schemes.

  A morphism
  \[
    (T' \;\longleftarrow\; P' \;\longrightarrow\; U) \;\longrightarrow\;
    (T \;\longleftarrow\; P \;\longrightarrow\; U)
  \]
  consists of a morphism $T' \to T$ and a $G$-equivariant morphism $P' \to P$ of schemes such that the diagram
  \[
    \begin{tikzcd}
      P' \arrow[r] \arrow[d] \arrow[rr, bend left=20] &
      P \arrow[r] \arrow[d] &
      U \\
      T' \arrow[r] & T &
      \arrow[from=1-1, to=2-1]
      \arrow[from=1-2, to=2-2]
    \end{tikzcd}
  \]
  is commutative and the left square is cartesian.
\end{definition}

A stack over a site $\mathcal{S}$ is a prestack $\mathcal{X}$ where the objects and morphisms glue uniquely in the Grothendieck topology of $\mathcal{S}$.

\begin{definition}
  [Stack] \label{def:stack}
  A \textbf{stack} $\mathcal{X}$ over a site $\mathcal{C}$ is a prestack over $\mathcal{C}$ satisfying the following descent conditions:
  \begin{itemize}
    \item (Descent for morphisms) For any $U\in\mathcal{C}$, any covering $\{f_i:U_i\to U\}$, and any $x,y\in\mathcal{X}(U)$, the presheaf
          \[
            \underline{\mathrm{Hom}}(x,y): (V\to U) \mapsto \mathrm{Hom}_{\mathcal{X}(V)}(f^*x,f^*y)
          \]
          is a sheaf on $\mathcal{C}/U$.
    \item (Descent for objects) For any $U\in\mathcal{C}$, any covering $\{f_i:U_i\to U\}$, and any descent datum $(x_i,\phi_{ij})$ relative to $\{f_i:U_i\to U\}$, there exists an object $x\in\mathcal{X}(U)$ and isomorphisms $\psi_i:f_i^*x\xrightarrow{\sim} x_i$ such that $\phi_{ij}\circ f_j^*\psi_j = f_i^*\psi_i$.
  \end{itemize}
\end{definition}

\begin{definition}[Substack]
  A \textbf{substack} $\mathcal{Y}\subseteq \mathcal{X}$ is given by:
  \begin{itemize}
    \item For each $U\in\mathcal{C}$, a full subcategory $\mathcal{Y}(U)\subseteq \mathcal{X}(U)$.
    \item Stability under restriction:
          If $y\in \mathcal{Y}(U)$ and $f:V\to U$ is a morphism in the site, then the pullback $f^*y \in \mathcal{X}(V)$ must lie in $\mathcal{Y}(V)$.
    \item Stack condition:
          The collection $\mathcal{Y}$ is itself a stack (i.e. satisfies descent for objects and morphisms).
  \end{itemize}
\end{definition}

\begin{definition}[Open and closed substacks]\label{def:open-closed-substacks}
  A substack $\mathcal{T} \subseteq \mathcal{X}$ of a stack over $\mathrm{Sch}_{\mathrm{\acute{e}t}}$
  is called an \textbf{open substack} (resp.\ \textbf{closed substack}) if the inclusion
  $\mathcal{T} \to \mathcal{X}$ is representable by schemes and an open immersion (resp.\ closed immersion).
\end{definition}

\section{Introduction}
We show that we can construct $\mathbb{Z}$ many derived equivalences between $X_+$ and $X_-$, and that the resulting autoequivalences are spherical twists. Segal's paper upgrades this equivalence to an equivalence of $B$-brane dg-categories. In particular, he shows that there are $\mathbb{Z}$ many quasi-equivalences between the categories of B-branes on $(X_+, W)$ and $(X_-, W)$. When $W=0$, the dg-category of B-branes is just the dg-category of perfect complexes, whose homotopy category is the bounded derived category of coherent sheaves. So Segal's result recovers the derived equivalences we construct here.

\red{Can you shed any intuition on what the $B$-brane dg-category is?}

\red{I don't understand how VGIT, derived categories, and $B$-branes fit into the TQFT picture and what we are talking about in seminar.}

\red{What is so interesting about the fact that these derived equivalences are spherical twists? Do you get something nice?}

\subsection{Set-up}

Let $V = \mathbb{C}^4$ with co-ordinates $x_1, x_2, y_1, y_2$, and let $\mathbb{C}^*$ act on $V$ with weight $1$ on each $x_i$ and weight $-1$ on each $y_i$. There are two possible GIT quotients $X_{+}$ and $X_{-}$, depending on whether we choose a positive or negative character of $\mathbb{C}^*$. Both are isomorphic to the total space of the bundle $\mathcal{O}(-1)^{\oplus 2}$ over $\mathbb{P}^1$. This is the standard "three-fold flop" situation.

Both are open substacks of the Artin quotient stack
\[
  \mathcal{X} = [V/\mathbb{C}^*]
\]
given by the semi-stable locus for either character.
Let
\[
  \iota_{\pm} : X_{\pm} \hookrightarrow \mathcal{X}
\]
denote the inclusions.

\begin{remark}[The quotient stack and its open substacks]
  Recall that via the functor of points perspective, its objects are pairs $(P,\phi)$, where $P$ is a principal $\mathbb{C}^*$-bundle and $\phi: P\to V$ is $\mathbb{C}^*$-equivariant.

  For a given choice of character $\chi_m$, the semistable locus $V^{ss}(\chi_m)$ is an open subset of $V$. It is open because it is defined by the nonvanishing of some semi-invariant sections. The corresponding GIT quotient is $[V^{ss}(\chi_m)/\mathbb{C}^*]$ as a substack.
  Thus:
  \[
    X_\pm = [V^{ss}(\pm 1)/\mathbb{C}^*] \;\subset\; [V/\mathbb{C}^*] = \mathcal{X}
  \]
  It turns out that open substacks of quotient stacks $[V/G]$ are exactly those substacks which are of the form $[U/G]$ where $U\subseteq V$ is a $G$-invariant open subscheme. Here $V^{ss}(\chi_m)\subset V$ is $G$-invariant and open, so $[V^{ss}(\chi_m)/\mathbb{C}^*]\hookrightarrow [V/\mathbb{C}^*]$ is exactly an open immersion of stacks.
\end{remark}

This stacky point of view makes it clear that there are (exact) restriction functors
\[
  \iota_{\pm}^* : D^b(\mathcal{X}) \;\to\; D^b(X_{\pm}).
\]

By $D^b(\mathcal{X})$ we mean the derived category of the category of $\mathbb{C}^*$-equivariant sheaves on $V$. This contains the obvious equivariant line bundles $\mathcal{O}(i)$ associated to the characters of $\mathbb{C}^*$.

\begin{remark}[General fact about open immersions]
  If $j: U \hookrightarrow X$ is an open immersion of schemes, then there is an exact restriction functor $j^*: \mathrm{QCoh}(X) \to \mathrm{QCoh}(U)$. This is because $j^*\cF$ has the same stalk as $\cF$ at points of $U$.

  Althernatively, exactness comes from the fact that restricting a quasi-coherent sheaf to an open set is just tensoring with $\mathcal{O}_U$, which is flat (in general localisation is flat).

  Passing to derived categories, you still have $j^*: D^b(\mathrm{QCoh}(X)) \to D^b(\mathrm{QCoh}(U))$ which has no higher derived functors since $j^*$ is exact. The exact same holds in the stack setting: if $\iota: \mathcal{U} \hookrightarrow \mathcal{X}$ is an open immersion of stacks, you get $\iota^*: D^b(\mathcal{X}) \to D^b(\mathcal{U})$.
\end{remark}

\begin{remark}[General dictionary for quotient stacks and equivariant geometry]
  There is a general dictionary relating the stack-theoretic concepts and the equivariant geometry of $X$. Here $G$ is a reductive algebraic group acting on a scheme $X$ and $[X/G]$ is the quotient stack.
  \begin{center}
    \begin{tabular}{|l|l|}
      \hline
      \textbf{Geometry of $[X/G]$} & \textbf{$G$-equivariant geometry of $X$}                   \\[1ex]
      \hline
      $\mathbb{C}$-point $\bar{x} \in [X/G]$
                                   & orbit $Gx$ of $\mathbb{C}$-point $x \in X$                 \\
                                   & (with $\bar{x}$ the image of $x$ under $X \to [X/G]$)      \\[1ex]
      \hline
      automorphism group $\mathrm{Aut}(\bar{x})$
                                   & stabilizer $G_x$                                           \\[1ex]
      \hline
      function $f \in \Gamma([X/G],\mathcal{O}_{[X/G]})$
                                   & $G$-equivariant function $f \in \Gamma(X,\mathcal{O}_X)^G$ \\[1ex]
      \hline
      map $[X/G] \to Y$ to a scheme $Y$
                                   & $G$-equivariant map $X \to Y$                              \\[1ex]
      \hline
      line bundle
                                   & $G$-equivariant line bundle (or $G$-linearization)         \\[1ex]
      \hline
      quasi-coherent sheaf
                                   & $G$-equivariant quasi-coherent sheaf                       \\[1ex]
      \hline
      tangent space $T_{[X/G],\bar{x}}$
                                   & normal space $T_{X,x}/T_{Gx,x}$ to the orbit               \\[1ex]
      \hline
      coarse moduli space $[X/G] \to Y$
                                   & geometric quotient $X \to Y$                               \\[1ex]
      \hline
      good moduli space $[X/G] \to Y$
                                   & good GIT quotient $X \to Y$                                \\[1ex]
      \hline
    \end{tabular}
  \end{center}
\end{remark}

The unstable locus for the negative character is the set
$\{y_1 = y_2 = 0\} \subset V$. Consider the \red{Koszul resolution} of the associated sky-scraper sheaf:
\[
  K_{-} = \mathcal{O}(2) \xrightarrow{(y_2,-y_1)} \mathcal{O}(1)^{\oplus 2}
  \xrightarrow{(y_1,y_2)} \mathcal{O}.
\]
Then $\iota_{-}K_{-}$ is exact, \red{it is the pull-up of the Euler sequence} from
$\mathbb{P}^1_{y_1:y_2}$. On the other hand $\iota_{+}K_{-}$ is a resolution of the sky-scraper
sheaf $\mathcal{O}_{\mathbb{P}^1_{x_1:x_2}}$ along the zero section. Similar comments apply for
the Koszul resolution $K_{+}$ of the set $\{x_1 = x_2 = 0\}$.

Let
\[
  \mathcal{G}_t \subset D^b(\mathcal{X})
\]
be the triangulated subcategory generated by the line bundles
$\mathcal{O}(t)$ and $\mathcal{O}(t+1)$. This is the smallest thick triangulated subcategory generated by these two objects. This is the \textbf{grade restriction rule} of Hori-Herbst-Page, which informally says if you restrict this window to either quotient $X^\pm$, you recover the derived category $D^b(X^\pm)$.

\begin{claim}
  For any $t \in \mathbb{Z}$, both $\iota_+^*$ and $\iota_-^*$ restrict to give equivalences
  \[
    D^b(X_+) \xleftarrow{\sim} \mathcal{G}_t \xrightarrow{\sim} D^b(X_-).
  \]
\end{claim}
\begin{proof}
The restriction functors
\[
  \iota_\pm^*:\ D^b(\mathcal X)\longrightarrow D^b(X^\pm)
\]
are exact and preserve shifts and cones. To prove that the restrictions
\[
  \iota_\pm^*:\ \mathcal{G}_t \xrightarrow{\ \sim\ } D^b(X^\pm)
\]
are equivalences, we need:
\begin{enumerate}
  \item Fully faithfulness: On $\mathcal{G}_t$, the restriction maps induce isomorphisms
        \[\mathrm{Hom}_{D^b(\mathcal{X})}(E,F) \cong \mathrm{Hom}_{D^b(X^\pm)}(\iota_\pm^*E, \iota_\pm^*F)\]
        Since $\mathcal{G}_t$ is generated by $\{\mathcal{O}(t), \mathcal{O}(t+1)\}$, it suffices to check this on these generators.
        Concretely, we need to compute $\mathrm{Ext}^\bullet_{\mathcal{X}}(\mathcal{O}(t+k), \mathcal{O}(t+l))$ for $k,l\in\{0,1\}$,
        and show it matches the Ext groups in $X^\pm$.

  \item Essential surjectivity: Every object in $D^b(X^\pm)$ should be built out of $\iota_\pm^*\mathcal{G}_t$.
        In other words, the images of $\mathcal{O}(t), \mathcal{O}(t+1)$ generate $D^b(X^\pm)$.
\end{enumerate}


To see that these functors are fully-faithful it suffices to check what they do to the maps
between the generating line-bundles, so we just need to check that
\[
  \operatorname{Ext}^\bullet_{\mathcal{X}}(\mathcal{O}(t+k),\mathcal{O}(t+l))
  = \operatorname{Ext}^\bullet_{X_\pm}(\mathcal{O}(t+k),\mathcal{O}(t+l))
\]
for $k,l \in [0,1]$.
For line bundles, $\operatorname{Ext}^\bullet(\mathcal O(a),\mathcal O(b)) \cong H^\bullet(\,\cdot\,,\ \mathcal O(b-a))$. Thus we need to verify that $H^\bullet_{\mathcal{X}}(\mathcal{O}(i)) = H^\bullet_{X_\pm}(\mathcal{O}(i))$ for $i \in [-1,1]$.

$\mathcal{X}$ is an affine quotient stack (with $V$ affine), so for any equivariant coherent sheaf, higher cohomology on $\mathcal{X}$ vanishes; taking global sections means "equivariant global sections" on $V$. Hence $H^p(\mathcal{X},\mathcal{O}(i))=(\mathcal{O}_V)_i$ for $p=0$ and $0$ for $p>0$, where $(\mathcal{O}_V)_i$ is the weight-$i$ subspace of the polynomial ring $\mathcal{O}_V=\mathbb{C}[V]$.

To compute $H^\bullet(X_\pm,\mathcal{O}(i))$, we use the projection $\pi:X_\pm\to\mathbb{P}^1$ and the fact that $X_\pm$ is the total space of the bundle $\mathcal{O}(-1)^{\oplus 2}$ over $\mathbb{P}^1$. We do the computation for $X^+$; the case of $X^-$ is similar. Let $\pi:X^+\to \mathbb{P}^1$ be the projection and $E=\mathcal{O}(-1)^{\oplus 2}$. Then
\[
  \pi_*\mathcal{O}_{X^+}\cong\operatorname{Sym}^\bullet(E^\vee)
  =\operatorname{Sym}^\bullet(\mathcal{O}(1)^{\oplus 2})
  \cong\bigoplus_{m\ge0}\operatorname{Sym}^m(\mathcal{O}(1)^{\oplus 2})
  \cong\bigoplus_{m\ge0}\mathcal{O}(m)^{\oplus (m+1)}.
\]

\begin{remark}
  Recall that the total space of a vector bundle $E\to X$ is $\underline{\mathrm{Spec}}_X(\operatorname{Sym}^\bullet(E^\vee))$ where we take the relative Spec over $X$. Associated to any sheaf of algebras $\cA$ over a base scheme $B$ is the relative Spec, which is a scheme $Y,\cO_Y$ equipped with a morphism $\pi:Y\to B$. It has the property that $\pi_*\cO_Y=\cA$ and $\pi:Y\to B$ is affine. In our case, the sheaf of algebras is $\operatorname{Sym}^\bullet(E^\vee)$, which is the symmetric algebra on the dual bundle $E^\vee$.

  This means that if locally on $B$ we have $E \cong \mathcal{O}_B^{\oplus r}$ is trivial of rank $r$, then  $\underline{\mathrm{Spec}}_B(\operatorname{Sym}^\bullet(E^\vee))$ means we glue together the affine scheme $\mathrm{Spec}(\mathcal{O}_B[t_1,\dots,t_r])$ fiberwise over $B$. Thus \[\operatorname{Sym}^\bullet(E^\vee) \cong \mathcal{O}_B[t_1,\dots,t_r]\]

  The last isomorphism above can be seen from the general fact that if $L$ is a line bundle and $V$ is a vector space, then $\operatorname{Sym}^m(L\otimes V) \cong L^{\otimes m}\otimes \operatorname{Sym}^m(V)$. Locally trivialize $L$. Then $\operatorname{Sym}^m(L\otimes V)$ is generated by monomials $(\ell\otimes v_1)\cdots (\ell\otimes v_m) = \ell^m \otimes (v_1\cdots v_m)$, which shows the factorization.
\end{remark}

By projection formula and affineness of $\pi$ \[
  H^p(X^+,\mathcal{O}(k))
  \cong
  H^p\Big(\mathbb{P}^1,\ \pi_*\mathcal{O}_{X^+}\otimes\mathcal{O}(k)\Big)
  \cong
  \bigoplus_{m\ge0} H^p(\mathbb{P}^1,\ \mathcal{O}(k+m))^{\oplus (m+1)}.
\]

\begin{remark}
  Recall that for a morphism $\pi:X\to B$ and a sheaf $F$ on $X$, there is a spectral sequence (Leray) \[E_2^{p,q} = H^p(B, R^q\pi_*F) \Longrightarrow H^{p+q}(X,F)\]

  Since $\pi$ is affine, $R^p\pi_*=0$ for $p>0$.
  So in the Leray spectral sequence, all rows with $q>0$ are zero. That means already on the $E_2$-page, only the bottom row q=0 survives. No differentials are possible, so $E_2=E_\infty$.
Thus
  \[H^p(X,F) \cong H^p(B,\pi_*F)\]

  Therefore we need to compute $\pi_*\mathcal{O}_{X^+} \otimes \mathcal{O}(k)$. The projection formula says: for any quasi-coherent sheaf $F$ on $X$ and any sheaf $G$ on $B$, $\pi_*(F\otimes \pi^*G) \cong \pi_*F \otimes G$. Take $F=\mathcal{O}_X$ and $G=\mathcal{O}_B(k)$. Then: $\pi_*(\mathcal{O}_X\otimes \pi^*\mathcal{O}_B(k)) \cong \pi_*\mathcal{O}_X \otimes \mathcal{O}_B(k)$. But $\mathcal{O}_X\otimes \pi^*\mathcal{O}_B(k)$ is exactly $\mathcal{O}_X(k)$ so \[\pi_*\mathcal{O}_X(k) \cong \pi_*\mathcal{O}_X \otimes \mathcal{O}_B(k)\]
\end{remark}

Now use the standard $\mathbb{P}^1$ cohomology:
\[
  H^0(\mathbb{P}^1,\mathcal{O}(n))=\begin{cases}\mathbb{C}^{\,n+1}& n\ge0\\ 0& n<0\end{cases},\qquad
  H^1(\mathbb{P}^1,\mathcal{O}(n))=\begin{cases}0& n\ge-1\\ \mathbb{C}^{\,(-n-1)}& n\le-2\end{cases}.
\]

So for $p=0$, we get that \begin{align*}
  H^0(X^+,\mathcal O(k)) &\;\cong\;
\bigoplus_{m\ge0} H^0(\mathbb P^1,\mathcal O(k+m))^{\oplus(m+1)} \\
&\;\cong\; \Sym^{k+m}(\mathbb C^2_{x_1,x_2}) \otimes \Sym^m(\mathbb C^2_{y_1,y_2}) \\
\end{align*} which is exactly the weight-$k$ part of $\mathcal O_V=\mathbb C[x_1,x_2,y_1,y_2]$.

For $p=1$, we have \[H^1(X^+,\mathcal O(k))\cong \bigoplus_{m\ge0} H^1(\mathbb P^1,\mathcal O(k+m))^{\oplus(m+1)}\]
 On $\mathbb P^1$, $H^1(\mathcal O(n))=0$ for $n\ge -1$. So if $k\ge -1$ (the window for the flop), then $k+m\ge -1$ for all $m\ge0$, hence $H^1(X^+,\mathcal O(k))=0$. This matches the stack, where all higher $H^p$ vanish because $[V/\mathbb C^*]$ is (relatively) affine. This proves fully faithfulness of $\iota_+^*$ on the window.
\begin{remark}
Note that if $k\leq -2$, then at least the $m=0$ term contributes $H^1(\mathbb{P}^1,\mathcal{O}(k))\neq 0$. Here $H^1$ on $X^+$ is nonzero, while on the stack it is zero - this is exactly where agreement fails outside the window.
\end{remark}


To see that they are essentially surjective we need to know that the two given line bundles generate $D^b(X_\pm)$. That is, every object of $D^b(X^\pm)$ should be quasi-isomorphic to a complex built out of $\iota_\pm^*\mathcal{O}(t)$ and $\iota_\pm^*\mathcal{O}(t+1)$.

\red{This is essentially a corollary of Beilinson's theorem. I think I understand the statement of Beilinson's theorem, but what exactly is the content?}
\end{proof}

\begin{remark}
  Essential surjectivity follows from a general theorem which says that on quasi-projective varieties, an ample line bundle and its twists generate the derived category. The intuition behind this statement is Serre's theorem which says that for any coherent sheaf $\mathcal{F}$, $\mathcal{F}(n)$ is globally generated for $n\gg 0$. 

  Pick an ample line bundle L on X. Serre vanishing gives, for $m\gg0$: (1) $H^i(X, F\otimes L^{\otimes m})=0$ for all $i>0$ and any coherent F, and (2) $F\otimes L^{\otimes m}$ is globally generated.

  For m large, the evaluation map is surjective:
  \[
  H^0(X, F(m))\otimes \mathcal O_X \twoheadrightarrow F(m).
  \]
  Twist down by $L^{-m}$:
  \[
  H^0(X, F(m))\otimes L^{-m} \twoheadrightarrow F.
  \]
  So F is a quotient of a finite direct sum of a power of $L^{-1}$. Let $K_1:=\ker(1)$. Then $K_1$ is coherent.

  Apply Serre vanishing again to $K_1$: choose $m_1\gg0$ so that $K_1(m_1)$ is globally generated and $H^{>0}(K_1(m_1))=0$. Get a surjection
  \[
  H^0(X, K_1(m_1))\otimes L^{-m_1}\twoheadrightarrow K_1,
  \]
  with kernel $K_2$. Repeat. Using Castelnuovo–Mumford regularity, you can choose $m, m_1,\dots$ so this iteration stops in at most $\dim X+1$ steps, giving a finite resolution:
  \[
  0\to \bigoplus L^{-m_r} \to \cdots \to \bigoplus L^{-m_1}\to \bigoplus L^{-m}\to F\to 0.
  \]

  Thus every coherent F has a finite resolution by direct sums of powers of $L^{-1}$. Passing to derived categories, this means the triangulated subcategory generated by the line bundles $\{L^{\otimes n}\mid n\in\mathbb Z\}$ contains every object of $D^b(\Coh(X))$.
\end{remark}

There's a standard Koszul resolution on the stack $\mathcal{X}=[V/\mathbb{C}^*]$:
\[
  0 \to \mathcal{O}(2) \xrightarrow{(y_2,-y_1)} \mathcal{O}(1)^{\oplus 2} \xrightarrow{(y_1,y_2)} \mathcal{O} \to 0.
\]
\red{Peng said something about a simliar sequence on $\cX$ with the skyscraper sheaf at $0$ which restricts to $0$ on $X^+$.}
This is exact because it's the Koszul complex resolving the unstable locus $\{y_1=y_2=0\}$. Restricting to $X^+$, it's still exact.

Now if you tensor by $\mathcal{O}(k)$, you get
\[
  0 \to \mathcal{O}(k+2) \to \mathcal{O}(k+1)^{\oplus 2} \to \mathcal{O}(k) \to 0.
\]
Because $\mathcal{O}(k)$ is a line bundle (locally free), tensoring preserves exactness. Then this sequence says that $\mathcal{O}(k)$ sits in a short exact sequence whose terms are in degrees $k+1$ and $k+2$.

Translated into the derived category: $\mathcal{O}(k)$ is quasi-isomorphic to a 2-term complex built from $\mathcal{O}(k+1)$ and $\mathcal{O}(k+2)$. So inductively, you can move any line bundle "into the window range" by expressing it as a cone of maps between line bundles shifted up or down. In other words, two consecutive line bundles $\mathcal{O}(t),\mathcal{O}(t+1)$ generate all line bundles. And since line bundles generate the whole $D^b(X^+)$, you're done.

So for any $t\in\mathbb{Z}$ we have a derived equivalence
\[
  \Phi_t : D^b(X_+) \;\xrightarrow{\ \sim\ }\; D^b(X_-)
\]
passing through $\mathcal{G}_t$. Composing these, we get auto-equivalences
\[
  \Phi_{t+1}^{-1}\Phi_t : D^b(X_+) \;\xrightarrow{\ \sim\ }\; D^b(X_+).
\]

To see what these do, we need to check them on the generating set of line-bundles
$\{\mathcal{O}(t), \mathcal{O}(t+1)\}$. Applying $\Phi_t$ to this set is easy, \red{it just sends them
  to the same line-bundles} on $X_-$. To apply $\Phi_{t+1}^{-1}$ however, we first have to resolve
$\mathcal{O}(t)$ in terms of $\mathcal{O}(t+1)$ and $\mathcal{O}(t+2)$. We do this using the
exact sequence $\iota_-K_{-}(t)$. \red{The result is that }$\Phi_{t+1}^{-1}\Phi_t$ sends
\[
  \mathcal{O}(t) \;\mapsto\;
  \big[ \mathcal{O}(t+2) \xrightarrow{(-y_2,y_1)} \mathcal{O}(t+1)^{\oplus 2} \big],
  \qquad
  \mathcal{O}(t+1) \;\mapsto\; \mathcal{O}(t+1).
\]

\begin{claim}
  $\Phi_{t+1}^{-1}\Phi_t$ is an inverse spherical twist around
  $\mathcal{O}_{\mathbb{P}^1_{x_1:x_2}}(t)$.
\end{claim}

A spherical twist is an autoequivalence discovered by \cite{seidel-thomas} associated to any
spherical object in the derived category, i.e.\ an object $S$ such that
\[
  \operatorname{Ext}(S,S) = \mathbb{C} \oplus \mathbb{C}[-n]
\]
for some $n$ (i.e.\ the homology of the $n$-sphere). It sends any object $\mathcal{E}$ to the
\red{cone on the evaluation map}
\[
  \big[ \operatorname{RHom}(S,\mathcal{E}) \otimes S \;\longrightarrow\; \mathcal{E} \big].
\]
The inverse twist sends $\mathcal{E}$ to the cone on the dual evaluation map
\[
  \big[ \mathcal{E} \;\longrightarrow\; \operatorname{RHom}(\mathcal{E},S)^\vee \otimes S \big].
\]

The object $\mathcal{O}_{\mathbb{P}^1_{x_1:x_2}}(t) \simeq \iota_+K_{-}(t)$ is spherical, and
the inverse twist around it sends $\mathcal{O}(t+1)$ to itself and $\mathcal{O}(t)$ to the cone
\[
  \big[\mathcal{O}(t) \longrightarrow \iota_+K_{-}(t)\big]
  \simeq \big[\mathcal{O}(t+2) \xrightarrow{(-y_2,y_1)} \mathcal{O}(t+1)^{\oplus 2}\big],
\]
which agrees with $\Phi_{t+1}^{-1}\Phi_t$. \red{To complete the proof of the claim we would just need to check that the two functors }also agree on the Hom-sets between $\mathcal{O}(t)$ and
$\mathcal{O}(t+1)$.

Now instead let $V = \mathbb{C}^{p+q}$ with co-ordinates $x_1,\ldots,x_p, y_1,\ldots,y_q$.
Let $\mathbb{C}^*$ act linearly on $V$ with positive weights on each $x_i$ and negative weights
on each $y_i$. The two GIT quotients $X_+$ and $X_-$ are both the total spaces of orbi-vector
bundles over weighted projective spaces.

We must assume the Calabi-Yau condition that $\mathbb{C}^*$ acts through $SL(V)$. Let $d$ be the
sum of the positive weights, so the sum of the negative weights is $-d$. The above argument goes
through word-for-word, where now
\[
  \mathcal{G}_t = \langle \mathcal{O}(t), \ldots, \mathcal{O}(t+d-1)\rangle.
\]



\section{References}
NOTES ON GIT AND SYMPLECTIC REDUCTION FOR
BUNDLES AND VARIETIES
by R. P. THOMAS

Alper Moduli

Segal paper
\end{document}