\documentclass[12pt]{article}
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{bookmark}
\usepackage{tikz}
\usepackage{/Users/songye03/Desktop/math_tex/style/quiver}
\usepackage{/Users/songye03/Desktop/math_tex/style/scribe}
\usepackage{fancyhdr}

\usepackage{parskip} % Automatically respects blank lines
\usepackage{booktabs} % For \addlinespace command
\setlength{\parskip}{1em} % Adds more space between paragraphs
\setlength{\parindent}{0pt} % Removes paragraph indentation

\begin{document}


\lhead{Songyu Ye}
\rhead{\today}
\cfoot{\thepage}

\title{Equivariant Derived Categories of Coherent Sheaves}

\author{Songyu Ye}
\date{\today}
\maketitle


\begin{abstract}
  Notes for a talk I'm giving on equivariant derived categories of coherent sheaves.
\end{abstract}

\tableofcontents


\section{Generalities on GIT quotients}
Let $X \subset \mathbb{P}^n$ be a projective variety, and let $\widetilde{X} \subset \mathbb{C}^{n+1}$ be the corresponding affine cone.
Since $X$ is the space of lines in $\widetilde{X}$, it has a tautological line bundle
\[
  \mathcal{O}_X(-1) = \mathcal{O}_{\mathbb{P}^n}(-1)\big|_X
\]
over it whose fibre over a point in $X$ is the corresponding line in
$\widetilde{X} \subset \mathbb{C}^{n+1}$. The total space of $\mathcal{O}_X(-1)$ therefore
has a tautological map to $\widetilde{X}$ which is an isomorphism away from the zero section
$X \subset \mathcal{O}_X(-1)$, which is all contracted down to the origin in $\widetilde{X}$.
In fact the total space of $\mathcal{O}_X(-1)$ is the \textbf{blow up} of $\widetilde{X}$ in the origin.

Linear functions on $\mathbb{C}^{n+1}$ like $x_i$, restricted to $\widetilde{X}$ and pulled
back to the total space of $\mathcal{O}_X(-1)$, give functions which are linear on the fibres,
so correspond to sections of the \textbf{dual} line bundle $\mathcal{O}_X(1)$. Similarly degree $k$
homogeneous polynomials on $\widetilde{X}$ define functions on the total space of $\mathcal{O}_X(-1)$
which are of degree $k$ on the fibres, and so give sections of the $k$th tensor power
$\mathcal{O}_X(k)$ of the dual of the line bundle $\mathcal{O}_X(-1)$.

So the grading that splits the functions on $\widetilde{X}$ into homogeneous degree
(or $\mathbb{C}^*$-weight spaces) corresponds to sections of different line bundles $\mathcal{O}_X(k)$
on $X$. So
\[
  \bigoplus_{k \ge 0} H^0(\mathcal{O}_X(k))
\]
considered a graded ring by tensoring sections
$\mathcal{O}(k) \otimes \mathcal{O}(l) \cong \mathcal{O}(k+l)$. For the line bundle $\mathcal{O}_X(1)$
sufficiently positive, this ring will be generated in degree one. It is often called the
(homogeneous) coordinate ring of the \textbf{polarized} (i.e.~endowed with an ample line bundle)
variety $(X,\mathcal{O}_X(1))$.

The degree one restriction is for convenience and can be dropped (by working with varieties
in weighted projective spaces), or bypassed by replacing $\mathcal{O}_X(1)$ by $\mathcal{O}_X(p)$,
i.e.~using the ring
\[
  R^{(p)} = \bigoplus_{k \ge 0} R_{kp}; \qquad \text{for $p \gg 0$ this will be generated by its degree one piece $R_p$.}
\]
The choice of generators of the ring is what gives the embedding in projective space. In fact
the sections of any line bundle $L$ over $X$ define a (rational) map
\begin{equation} \label{eq:map}
  X \dashrightarrow \mathbb{P}\big(H^0(X,L)^*\big),
  \qquad
  x \mapsto ev_x,
  \quad
  ev_x(s) := s(x),
\end{equation}
which in coordinates maps $x$ to $(s_0(x):\cdots:s_n(x)) \in \mathbb{P}^n$, where $s_i$ form a basis for $H^0(L)$. This map is only defined for those $x$ with $ev_x \neq 0$,
i.e.~for which $s(x)$ is not zero for every $s$.

Now suppose we are in the following situation, of $G$ acting on a projective variety
$X$ through $SL$ transformations of the projective space.
\[
  \begin{tikzcd}
    G \arrow[d] & \curvearrowright & X \arrow[d,hook] \\
    SL(n+1,\mathbb{C}) & \curvearrowright & \mathbb{P}^n
  \end{tikzcd}
\]
Since we have assumed that $G$ acts through $SL(n+1,\mathbb{C})$, the action lifts from $X$ to one covering it on $\mathcal{O}_X(-1)$. In other words we don't just act on the projective space (and $X$ therein)
but on the vector space overlying it (and the cone $\widetilde{X}$ on $X$ therein). This
is called a \textbf{linearization} of the action. Thus $G$ acts on each
$H^0(\mathcal{O}_X(r))$.

Then, just as $(X,\mathcal{O}_X(1))$ is determined by its graded ring of sections of
$\mathcal{O}(r)$ (i.e.~the ring of functions on $\widetilde{X}$),
\[
  (X,\mathcal{O}(1)) \;\longleftrightarrow\; \bigoplus_r H^0(X,\mathcal{O}(r))
\]
we simply \textbf{construct} $X/G$ (with a line bundle on it) from the ring of
\textbf{invariant} sections:
\[
  X/G \;\longleftrightarrow\; \bigoplus_r H^0(X,\mathcal{O}(r))^G
\]
This is sensible, since if there is a good quotient then functions on it pullback to give
$G$-invariant functions on $X$, i.e.~functions constant on the orbits, the fibres of
$X \to X/G$. For it to work we need:
\begin{lemma}
  $\bigoplus_r H^0(X,\mathcal{O}(r))^G$ is finitely generated.
\end{lemma}

\begin{proof}
  Since $R := \bigoplus_r H^0(X,\mathcal{O}(r))$ is Noetherian, Hilbert’s basis theorem tells
  us that the ideal $R\cdot \big(\bigoplus_{r>0} H^0(X,\mathcal{O}(r))^G\big)$ generated by
  $R^G_{+} := \bigoplus_{r>0} H^0(X,\mathcal{O}(r))^G$ is generated by a finite number of
  elements $s_0,\ldots,s_k \in R^G_{+}$.

  Thus any element $s \in H^0(X,\mathcal{O}(r))^G$, $r>0$, may be written
  $s = \sum_{i=0}^k f_i s_i$ for some $f_i \in R$ of degree $<r$. To show that the $s_i$
  generate $R^G_{+}$ as an algebra we must show that the $f_i$ can be taken to lie in $R^G$.

  We now use the fact that $G$ is the complexification of the compact group $K$. Since
  $K$ has an invariant metric, we can average over it and use the facts that $s$ and $s_i$
  are invariant to give
  \[
    s = \sum_{i=0}^k \operatorname{Av}(f_i)\, s_i,
  \]
  where $\operatorname{Av}(f_i)$ is the ($K$-invariant) $K$-average of $f_i$. By complex
  linearity $\operatorname{Av}(f_i)$ is also $G$-invariant (for instance, since $G$ has a
  polar decomposition $G = K \exp(i\mathfrak{t})$). The $\operatorname{Av}(f_i)$ are also of
  degree $<r$, and so we may assume, by an induction on $r$, that we have already shown that
  they are generated by the $s_i$ in $R^G_{+}$. Thus $s$ is also.
\end{proof}

\begin{definition}[Projective GIT quotient]
  Let $X$ be a projective variety with an action of a reductive group $G$ linearised by a line bundle $\mathcal{O}_X(1)$. We define the projective GIT quotient $X/G$ to be
  \[
    X/G = \operatorname{Proj}\, \bigoplus_r H^0(X,\mathcal{O}(r))^G.
  \]
\end{definition}
If $X$ is a variety (rather than a scheme) then so is $X/G$, as its graded ring sits inside
that of $X$ and so has no zero divisors.

\begin{definition}[Naive affine GIT quotient]
  Let $X = \operatorname{Spec} R$ be an affine variety with an action of a reductive group $G$. We define the affine GIT quotient $X/G$ to be $\operatorname{Spec}(R^G)$, where $R^G$ is the ring of $G$-invariant regular functions on $X$.
\end{definition}
In some cases, this does not work so well. For instance, under the scalar action of
$\mathbb{C}^*$ on $\mathbb{C}^{n+1}$ the only invariant polynomials in
$\mathbb{C}[x_0,\dots,x_n]$ are the constants and this recipe for the quotient gives a
single point. In the language of the next section, this is because there are no stable
points in this example, and all semistable orbits’ closures intersect (or equivalently,
there is a unique polystable point, the origin). More generally in any affine case all
points are always at least semistable (as the constants are always $G$-invariant functions)
and so no orbits gets thrown away in making the quotient (though many may get identified
with each other — those whose closures intersect which therefore cannot be separated
by invariant functions). But for the scalar action of $\mathbb{C}^*$ on $\mathbb{C}^{n+1}$
we clearly need to remove at least the origin to get a sensible quotient.

So we should change the linearization, from the trivial linearization to a nontrivial one, to get a bigger quotient. This is demonstrarted in the following example.

\begin{example}[Projective space as a GIT quotient]
  Consider the trivial line bundle on $\mathbb{C}^{n+1}$ but with a nontrivial
  linearization, by composing the $\mathbb{C}^*$-action on $\mathbb{C}^{n+1}$ by a character
  $\lambda \mapsto \lambda^{p}$ of $\mathbb{C}^*$ acting on the fibres of the trivial line
  bundle over $\mathbb{C}^{n+1}$. The invariant sections of this no longer form a ring; we
  have to take the direct sum of spaces of sections of \textbf{all powers} of this linearization,
  just as in the projective case, and take $\operatorname{Proj}$ of the invariants of the
  resulting graded ring.

  We calculate the invariant sections for general p. Look at the $k$-th tensor power of the linearised line bundle. Sections are homogeneous polynomials $f(x_0,\dots,x_n)$ of some degree. Under $\lambda$, such an $f$ transforms as
  \[
    f(x_0,\dots,x_n) \mapsto f(\lambda x_0,\dots,\lambda x_n) = \lambda^d f(x_0,\dots,x_n),
  \]
  where $d=\deg f$.

  But the linearization introduces an extra factor $\lambda^{-pk}$ when we act on the fibre of the $k$-th tensor power. By definition, the $G$-action on a section $s$ is
  \[
    (g\cdot s)(x) \;=\; g\cdot \big(s(g^{-1}\cdot x)\big).
  \]
  Take a polynomial $f$ homogeneous of degree $d$. View the section as
  \[s(x) = f(x)\cdot e\]
  where $e$ is a trivialising section of the fibre. When we apply the group action:
  \[
    (g\cdot s)(x) = g\cdot(f(g^{-1}\cdot x)\cdot e)
    = \big(\lambda^{-d} f(x)\big)\cdot \lambda^{pk} e
    = \lambda^{-d+pk} f(x)\cdot e.
  \]
  For invariance, we need the weight to vanish, i.e.
  \[
    d = pk.
  \]
  So only polynomials of degree exactly $pk$ survive as invariants in the degree $k$ graded piece.

  If $p<0$ then there are no invariant sections and the quotient is empty. We have seen that
  for $p=0$ the quotient is a single point. For $p>0$ the invariant sections of the $k$th
  power of the linearization are the homogeneous polynomials on $\mathbb{C}^n$ of degree $kp$.
  So for $p=1$ we get the quotient
  \begin{equation}
    \mathbb{C}^{n+1}/\mathbb{C}^*
    = \operatorname{Proj} \bigoplus_{k\ge 0} \big(\mathbb{C}[x_0,\dots,x_n]_k\big)
    = \operatorname{Proj} \mathbb{C}[x_0,\dots,x_n] = \mathbb{P}^n.
  \end{equation}
  For $p\ge 1$ we get the same geometric quotient but with the line bundle
  $\mathcal{O}(p)$ on it instead of $\mathcal{O}(1)$.

  Another way to derive this is to embed $\mathbb{C}^{n+1}$ in $\mathbb{P}^{n+1}$ as
  $x_{n+1}=1$, act by $\mathbb{C}^*$ on the latter by
  \[\operatorname{diag}(\lambda,\dots,\lambda,\lambda^{-(n+1)}) \in SL(n+2,\mathbb{C})\]
  and do projective GIT. This gives, on restriction to $\mathbb{C}^{n+1} \subset \mathbb{P}^{n+1}$,
  the $p=n+1$ linearization above. The invariant sections of $\mathcal{O}((n+2)k)$ are of the form
  $x_{n+1}^k f$, where $f$ is a homogeneous polynomial of degree $(n+1)k$ in $x_1,\dots,x_n$.
  Therefore the quotient is
  \[
    \operatorname{Proj} \bigoplus_{k\ge 0}
    \big(\mathbb{C}[x_1,\dots,x_n]_{(n+1)k}\big) = \operatorname{Proj} \big(\mathbb{C}[x_1,\dots,x_n],\mathcal{O}(n+1)\big).
  \]
\end{example}

\begin{remark}[Variation of affine GIT]
  The different GIT quotients of an affine variety $X = \operatorname{Spec} R$ by a reductive group $G$ correspond to different choices of linearization of the trivial line bundle on $X$, i.e.~to different characters $\chi: G \to \mathbb{C}^*$. For each such character we define the GIT quotient to be
  \[
    X/\!/_{\chi} G := \operatorname{Proj} \bigoplus_{r\ge 0} R^{G,\chi^{\otimes r}},
  \]
  where
  \[
    R^{G,\chi^{\otimes r}} := \{f \in R \mid g\cdot f = \chi(g)^r f, \forall g\in G\}
  \]
  is the space of semi-invariant functions of weight $\chi^{\otimes r}$.
\end{remark}

\begin{remark}
  [Projective over affine GIT quotients] We have descibed the same recipe for constructing GIT quotients in the projective and affine cases. The most general situation is when we have a projective variety over an affine variety, i.e. a graded noetherian algebra
\[
R = \bigoplus_{m=0}^\infty R_m
\]
which is finitely generated as an algebra over $\C$.  
The variety $X = \Proj R$ is projective over the affine variety $\Spec R_0$, and comes equipped with an ample line bundle $\cL = \O_X(1)$.  
Furthermore, the integral closure (or normalization) of $R$ is isomorphic to the ring
\[
R' = \bigoplus_{m=0}^\infty \Gamma(X, \cL^{\otimes m}).
\]

Let $G$ be a reductive algebraic group acting on $R$ by graded algebra automorphisms.  Then $G$ acts on $X$ and $\cL$ is a $G$-linearized ample line bundle.  We can form the GIT quotient
\[
X /\!/ G := \Proj(R^G)
\]
\end{remark}


\begin{definition}[Semistable points]
  A point $x \in X$ is \textbf{semistable} iff there exists
  $s \in H^0(X,\mathcal{O}(r))^G$ with $r>0$ such that $s(x) \neq 0$. Points which are not
  semistable are \textbf{unstable}.
\end{definition}
So semistable points are those that the $G$-invariant functions see. The map \begin{align*}
  X^{ss} & \to \P(H^0(X,\mathcal{O}(r))^G)^* \\
  x      & \mapsto ev_x
\end{align*} is well defined on the (Zariski open, though possibly empty) locus $X^{ss} \subseteq X$ of semistable points, and it is clearly constant on $G$-orbits,
i.e.~it factors through the set-theoretic quotient $X^{ss}/G$. But it may contract more
than just $G$-orbits, so we need another definition.

\begin{definition}[Stable points]
  A semistable point $x$ is \textbf{stable} if and only if
  $\bigoplus_r H^0(X,\mathcal{O}(r))^G$ separates orbits near $x$ and the stabiliser of $x$ is finite.
\end{definition}

We now come to the main example which we will study throughout these notes, also known as the standard flop.

\begin{example}
[The standard flop via VGIT]
Let $V = \mathbb{C}^4$ with coordinates $x_1,x_2,y_1,y_2$ and consider the $\mathbb{C}^*$-action given by
\[
  t\cdot(x_1,x_2,y_1,y_2)=(t x_1, t x_2, t^{-1}y_1, t^{-1}y_2)
\]
We linearize this action by a character $\chi_m:t\mapsto t^m$ with $m\in\mathbb{Z}\setminus\{0\}$. Since $V$ is affine, the GIT quotient for $\chi_m$ is $\mathrm{Proj}\,R^{(m)}$, where
\[
  R^{(m)}=\bigoplus_{d\ge 0} \Gamma(V,\mathcal{O}_V)^{\mathbb{C}^*,\,\chi_m^{\otimes d}}=\bigoplus_{d\ge 0}\{\,f\in\mathbb{C}[x_1,x_2,y_1,y_2]\mid t\cdot f = t^{md} f\,\}
\]
In other words, $R^{(m)}_d$ is spanned by monomials whose total $\mathbb{C}^*$-weight is $md$, where the weight of a monomial $x_1^{a_1}x_2^{a_2}y_1^{b_1}y_2^{b_2}$ is $w=a_1+a_2-(b_1+b_2)$.

A point $v\in V$ is $\chi_m$-semistable iff there exists $d>0$ and $f\in R^{(m)}_d$ with $f(v)\ne 0$. Here $R^{(m)}_d$ consists of polynomials whose monomials have positive weight $w=md>0$. Such a monomial must contain at least one $x$, so it vanishes at any point with $x_1=x_2=0$. Therefore no section in $R^{(m)}_d$ can be nonzero at a point with $x_1=x_2=0$ and such points are unstable. Conversely, if $(x_1,x_2)\neq(0,0)$, then pick $d$ and the monomial
$f=x_i^{md}$ with $x_i\neq 0$. It has weight $md$ and $f(v)\neq 0$, so $v$ is semistable.

Therefore, for $m>0$,
\[
  V^{ss}(\chi_m)=V\setminus\{x_1=x_2=0\}.
\]
whose quotient is the total space of $\mathcal{O}(-1)^{\oplus 2}\to\mathbb{P}^1_{[x_1:x_2]}$. Similarly, for $m<0$, we have
\[
  V^{ss}(\chi_m)=V\setminus\{y_1=y_2=0\}.
\]
whose quotient is the total space of $\mathcal{O}(-1)^{\oplus 2}\to\mathbb{P}^1_{[y_1:y_2]}$.
\end{example}

\section{Autoequivalences from VGIT}
We show that we can construct $\mathbb{Z}$ many derived equivalences between $X_+$ and $X_-$, and that the resulting autoequivalences are spherical twists. Segal's paper upgrades this equivalence to an equivalence of $B$-brane dg-categories. In particular, he shows that there are $\mathbb{Z}$ many quasi-equivalences between the categories of B-branes on $(X_+, W)$ and $(X_-, W)$. When $W=0$, the dg-category of B-branes is just the dg-category of perfect complexes, whose homotopy category is the bounded derived category of coherent sheaves. So Segal's result recovers the derived equivalences we construct here.

\subsection{Connection to mirror symmetry}
Homological mirror symmetry predicts, in certain cases, that the bounded derived category of coherent sheaves on an algebraic variety should admit twist autoequivalences corresponding to a spherical object. 

In particular, Seidel and Thomas consider symplectic automorphisms of $M$ induce selfequivalences of the derived category of coherent sheaves on its mirror partner. Roughly saying, twist functors and generalized Dehn twists correspond to each other under mirror symmetry, and Kontsevich's homological mirror symmetry conjecture suggests that the derived category of coherent sheaves on a Calabi-Yau variety should admit twist autoequivalences corresponding to spherical objects.

There are techniques for studying the derived category of a geometric invariant theory (GIT)
quotient which are useful for the construction of autoequivalences, and there are general connections between the theory of spherical functors and the theory of
semiorthogonal decompositions and mutations.

Spherical twist autoequivalences of \(D^{b}(V)\) for a Calabi-Yau \(V\)
correspond to loops in the moduli space of complex structures on the mirror Calabi-
Yau \(V^\vee\), and flops correspond, under the mirror map, to certain paths in that complex
moduli space.

\subsection{Landau-Ginzburg B-models and matrix factorizations}

A Landau-Ginzburg model is a Kähler manifold \(X\) equipped with a
holomorphic function \(W\), called the superpotential.  In the B-model
we are interested in the pair \((X,W)\), and this only requires the
complex structure on \(X\), not the metric.  For our purposes we work
in the algebro-geometric setting, so \(X\) will be a smooth scheme (or
stack) over \(\mathbb{C}\).

When \(W=0\), it is a standard slogan that the category of B-branes is
the derived category \(D^{b}(X)\) of coherent sheaves on \(X\).  More
precisely, the category of B-branes should be a dg-category whose
homotopy category is \(D^{b}(X)\).  A convenient dg-model is given by
the category \(\mathrm{Perf}(X)\) of perfect complexes.  Its objects
are bounded complexes of finite-rank vector bundles on \(X\), and the
morphism complex between two objects \(E^{\bullet}\) and \(F^{\bullet}\)
is
\[
\mathrm{Hom}(E^{\bullet},F^{\bullet})
  \;=\;
  \Gamma\!\left( \mathcal{H}om(E^{\bullet},F^{\bullet})
  \otimes \mathcal{A}^{0,\bullet} \right),
\]
the Dolbeault complex of internal Homs.  The differential is the sum
of the Dolbeault operator \(\bar{\partial}\) and the internal
differential on \(\mathcal{H}om(E^{\bullet},F^{\bullet})\), which is
itself the graded commutator with the differentials on \(E^{\bullet}\)
and \(F^{\bullet}\).  The homology of this complex computes
\[
\mathrm{Ext}^{\bullet}(E^{\bullet},F^{\bullet})
  \;=\;
  \mathrm{Hom}_{D^{b}(X)}(E^{\bullet},F^{\bullet}).
\]
Since \(X\) is smooth, every object of \(D^{b}(X)\) is quasi-isomorphic
to a perfect complex, so that \(H_{0}(\mathrm{Perf}(X)) \simeq D^{b}(X)\)
as expected.

We now need to generalise this to the Landau-Ginzburg case \(W \neq 0\).
Kontsevich’s idea is to modify the notion of a chain complex by
replacing \(d^{2}=0\) with
\[
d^{2} = W.
\]
This makes no sense for a \(\mathbb{Z}\)-graded complex, so one works
instead with \(\mathbb{Z}_{2}\)-graded complexes.  This is the origin of
the category of matrix factorizations.  

\begin{definition}[Matrix Factorizations]\label{def:MF}
\leavevmode
\begin{enumerate}
\item
A \textbf{matrix factorization} \(\bar E = (E_\bullet,\delta_\bullet)\) of \(W\) on \(X\)
consists of a pair of vector bundles \(E_0,E_1\) on \(X\) together with
homomorphisms
\[
\delta_1 : E_1 \to E_0,
\qquad
\delta_0 : E_0 \to E_1,
\]
such that
\[
\delta_1 \delta_0 = W\cdot \mathrm{Id}_{E_0},
\qquad
\delta_0 \delta_1 = W\cdot \mathrm{Id}_{E_1}.
\]

\item
The dg-category of matrix factorizations is defined as follows.
If \(\bar E\) and \(\bar F\) are matrix factorizations, the morphism complex
\(\mathcal{H}om_{\MF}(\bar E,\bar F)\) is the \(\mathbb{Z}\)-graded complex
\[
\mathcal{H}om_{\MF}(\bar E,\bar F)^{2n}
  := \Hom(E_0,F_0) \oplus \Hom(E_1,F_1),
\]
\[
\mathcal{H}om_{\MF}(\bar E,\bar F)^{2n+1}
  := \Hom(E_0,F_1) \oplus \Hom(E_1,F_0),
\]
with differential
\[
d f := \delta_F \circ f - (-1)^{|f|}\, f \circ \delta_E.
\]
\end{enumerate}
\end{definition}

Matrix factorizations are also known as curved \(\mathbb{Z}/2\)-graded complexes of vector bundles with curvature \(W\). 

We replace the homological grading with the notion of \textbf{R-charge}
(strictly speaking, \textbf{vector R-charge}).  This is a geometric action
of \(\C^*\) on \(X\), under which \(W\) must have weight \(2\).  Then we
can define a \(B\)-brane to be a \(\C^*\)-equivariant vector bundle
\(E\), with an endomorphism \(d\) of R-charge \(1\), and the condition
\(d^2 = W \cdot 1_E\) makes sense.  If the \(\C^*\)-action is trivial,
then we are forced to take \(W=0\), and we recover the definition of a
perfect complex.  Also, the definition of the morphism chain complexes
in \(\Perf(X)\) adapts easily, as we shall see.

\begin{definition}\label{def:LGmodel}
A \textbf{Landau--Ginzburg \(B\)-model} is the following data:
\begin{itemize}
  \item A smooth \(n\)-dimensional scheme (or stack) \(X\) over \(\C\).
  \item A choice of function \(W \in \O_X\) (the \textbf{superpotential}).
  \item An action of \(\C^*\) on \(X\) (the \textbf{vector R-charge}).
\end{itemize}
such that
\begin{enumerate}
  \item \(W\) has weight (R-charge) equal to \(2\).
  \item \(-1 \in \C^*\) acts trivially.
\end{enumerate}
From now on we call the \(\C^*\) acting in this definition
\(\C^*_R\) to distinguish it from other \(\C^*\)-actions that will appear
later.
\end{definition}

\begin{definition}\label{def:Bbrane}
A \textbf{\(B\)-brane} on a Landau--Ginzburg \(B\)-model \((X,W)\) is a
finite-rank vector bundle \(E\) on \(X\), equivariant with respect to
\(\C^*_R\), equipped with an endomorphism \(d_E\) of R-charge \(1\)
such that
\[
d_E^2 = W \cdot 1_E.
\]
\end{definition}

In particular, \(X\) is a space endowed with a sheaf of curved algebras (with \(W\) as the curvature) and a \(B\)-brane is a locally free sheaf of curved dg-modules over \(X\). In particular, a brane for a LG model is given by a matrix factorization of its superpotential. The homotopy category of the dg-category of B-branes is an important invariant of singularities of the superpotential \(W\), as proved by Orlov.


\begin{example}
Let $X$ be a smooth variety and let $E\to X$ be a vector bundle with a connection
\[
\nabla_E \colon \Omega_X^p(E)\longrightarrow \Omega_X^{p+1}(E),
\]
satisfying the usual Leibniz rule.  
Write
\[
R := \nabla_E^2 \in \Omega_X^2(\End(E))
\]
for the curvature of $\nabla_E$. The connection $\nabla_E$ induces a connection on $\End(E)$ and hence a degree-$1$ operator
\[
\nabla \colon \Omega_X^p(\End(E)) \longrightarrow \Omega_X^{p+1}(\End(E)),
\]
characterized by
\[
(\nabla T)(s) \;=\; \nabla_E(Ts) - T(\nabla_E s),
\qquad T\in\Gamma(\End(E)),\; s\in\Gamma(E),
\]
and extended to all forms by the Leibniz rule.  A standard computation gives
\[
\nabla^2(\Phi) \;=\; [R,\Phi] := R\circ\Phi - \Phi\circ R
\qquad\text{for all }\Phi\in\Omega_X^\bullet(\End(E)).
\]

Thus the triple
\[
\mathcal{A}
:= \bigl(\Omega_X^\bullet(\End(E)),\,\nabla,\,[R,-]\bigr)
\]
is a curved dg-algebra in the sense that $\Omega_X^\bullet(\End(E))$ is a graded algebra, 
$\nabla$ is a degree-$1$ derivation, and
\[
\nabla^2 = [R,-]
\]
is given by commutator with a fixed element $R\in\Omega_X^2(\End(E))$.

Now consider the graded $\Omega_X^\bullet(\End(E))$-module
\[
M := \Omega_X^\bullet(E) = \bigoplus_{p\ge 0}\Omega_X^p(E),
\]
with action defined by
\[
(\eta\otimes T)\cdot(\theta\otimes s)
:= (\eta\wedge\theta)\otimes (T s),
\]
for local forms $\eta,\theta$ and sections $T\in\End(E)$, $s\in E$.  
The connection $\nabla_E$ defines a degree-$1$ operator
\[
\nabla_E \colon \Omega_X^p(E)\longrightarrow \Omega_X^{p+1}(E),
\]
which satisfies the graded Leibniz rule
\[
\nabla_E(a\cdot m)
= \nabla(a)\cdot m + (-1)^{|a|}\,a\cdot\nabla_E(m),
\qquad a\in\Omega_X^\bullet(\End(E)),\; m\in\Omega_X^\bullet(E).
\]
Moreover, by definition of the curvature,
\[
\nabla_E^2(m) = R\cdot m, \qquad m\in\Omega_X^\bullet(E),
\]
where $R$ acts via the above module structure.  This shows that
\[
(\Omega_X^\bullet(E),\nabla_E)
\]
is a (left) dg-module over the curved dg-algebra $\mathcal{A}$.

On the other hand, if we try to make $\mathcal A$ into a dg-module over itself using
left multiplication as the module structure and $\nabla$ as the differential, we obtain
\[
\nabla^2(a) = [R,a] = Ra - aR,
\qquad a\in\Omega_X^\bullet(\End(E)).
\]
For a module over the curved dg-algebra $(\mathcal A,\nabla,[R,-])$, the curvature
condition would require $d_M^2(m) = R\cdot m$ for all $m$ in the module.  
Under left multiplication this would read
\[
\nabla^2(a) = R\cdot a = Ra,
\]
which coincides with $[R,a]$ only if $a$ commutes with $R$.  Thus, in general,
$\nabla^2 \neq R\cdot(-)$ on $\mathcal{A}$, and hence $\mathcal{A}$ is \emph{not}
a dg-module over itself (with the naive left--multiplication structure).
\end{example}

\begin{example}[LG model ($\Z/2$-graded)]
Let $(R,W)$ be a Landau--Ginzburg model with $R$ a commutative ring and
$W\in R$ the superpotential.  Consider the curved dg-algebra
\[
A = (A^\bullet,d_A,h)
\]
defined by
\[
A^0 = R,\qquad A^1 = 0,\qquad d_A = 0,\qquad h = W.
\]
Thus $A$ is just the ring $R$ placed in degree $0$, with zero differential
and curvature element $W\in A^0$. In particular, $R$ is commutative so $[W,-]=0 = d_A^2$. A (left) dg-module over $A$ is then a $\Z/2$-graded $R$-module
\[
P = P^0 \oplus P^1
\]
equipped with an odd $R$-linear endomorphism
\[
d_P : P \longrightarrow P
\]
such that
\[
d_P^2 = W\cdot \id_P.
\]
Writing $d_P$ in components,
\[
d_P =
\begin{pmatrix}
0 & d^1 \\[2pt]
d^0 & 0
\end{pmatrix},
\qquad
d^0 : P^0 \to P^1,\quad
d^1 : P^1 \to P^0,
\]
the condition $d_P^2 = W\cdot\id_P$ becomes
\[
d^1 d^0 = W\cdot\id_{P^0},
\qquad
d^0 d^1 = W\cdot\id_{P^1}.
\]
That is, $P^0 \xrightarrow{d^0} P^1 \xrightarrow{d^1} P^0$ is a
$\Z/2$-periodic complex whose ``differential'' squares to multiplication
by $W$.  This is exactly a \emph{matrix factorization} of $W$ over $R$.
\end{example}

For a pair of dg-modules $M,N$ (i.e.\ matrix factorizations of $W$),
their morphisms form a $\Z$-graded complex $\Hom_A(M,N)$, where
\[
\Hom_A(M,N)^0
:= \Hom_R(M^0,N^0)\oplus\Hom_R(M^1,N^1),
\]
\[
\Hom_A(M,N)^1
:= \Hom_R(M^0,N^1)\oplus\Hom_R(M^1,N^0),
\]
and degrees extend periodically.  The differential on this complex is
defined for a homogeneous map $f$ of degree $|f|$ by
\[
d_{M,N}(f) = d_N \circ f \;-\; (-1)^{|f|}\, f \circ d_M.
\]
Because $d_M^2 = W\cdot\id_M$ and $d_N^2 = W\cdot\id_N$, with $W$ central in $R$,
one checks
\[
d_{M,N}^2(f)
= d_N^2\circ f \;-\; f\circ d_M^2
= W f - f W
= 0,
\]
so $d_{M,N}$ is indeed a differential.  In this way the matrix
factorizations of $(R,W)$ form a dg-category: objects are
dg-modules $(P,d_P)$ as above, and the morphism spaces are the complexes
$\Hom_A(M,N)$ with this differential.  Passing to $H^0$ of these Hom
complexes produces the corresponding \emph{homotopy category} of matrix
factorizations.

For a pair of dg-modules $M,N$, we have a differential $d_{M,N}$ on $\Hom_A(M,N)$ defined by
\[
d_{M,N}(f) = d_N \circ f \;-\; (-1)^{|f|}\, f \circ d_M.
\]
Thus we obtain a dg-category of dg-modules. One can form a \emph{homotopy category}.\begin{definition}
   A dg-category $\mathcal{C}$ gives, for each pair of objects $X,Y$, a cochain complex
\[
\Hom_{\mathcal{C}}^\bullet(X,Y)
\]
with differential $d$. The homotopy category $H^0(\mathcal{C})$ is defined as follows. Its objects are the same as those of $\mathcal{C}$. The morphism spaces are the degree-zero cohomology of the Hom-complexes, namely
\[
\Hom_{H^0(\mathcal{C})}(X,Y)=H^0\big(\Hom_{\mathcal{C}}^\bullet(X,Y)\big),
\]
and composition in $H^0(\mathcal{C})$ is induced by the composition of cochain maps (passing to cohomology). This makes sense because if one unwinds what it means for an element $f$ of degree $0$ of $\Hom_{\mathcal{C}}^\bullet(X,Y)$ to be closed (resp. exact), one sees that $f$ is closed precisely when it is a map of chain complexes, and exact when it is null-homotopic.
\end{definition}

\begin{definition} Let $(R,W)$ be a LG model with $R$ a commutative ring and $W\in R$ the superpotential. 
The \textbf{homotopy category of matrix factorizations} $\mathrm{HMF}(R,W)$ is defined as the homotopy category of the dg-category of dg-modules over the curved algebra $(R,0,W)$, i.e.
\[  
\mathrm{HMF} = \text{homotopy category of MFs with } 
P^0,P^1 \text{ finitely generated projective over } R.
\]
\end{definition}

\begin{theorem}[Buchweitz, Orlov] Fix a base field $k$. Let $(R,W)$ be a LG model with $R$ a commutative $k$-algebra and $W\in R$ the superpotential. Suppose $R$ is smooth. Then
\[
\mathrm{HMF}(R,W) \;=\; D_{\mathrm{Sing}}(R/W)
\;\simeq\;
D^b(R/W\text{\rm -f.g.-mod})/\Perf,
\]
where $\Perf = \text{bounded complexes of f.g.\ projective $R$-modules}$.
\end{theorem}

Recall that a \(B\)-brane on the LG \(B\)-model \((X,0)\) is a \(\C_R^*\)-equivariant
bundle \(E\) on \(X\) equipped with an endomorphism \(d_E\) of R-charge \(1\) whose
square is zero.  Let \(\mathbf{dg}_R\Vect(X)\) be the category whose objects are
\(B\)-branes on \((X,0)\) and whose morphisms are all morphisms of vector bundles.
This is a dg-category, and when the \(\C_R^*\)-action on \(X\) is trivial it is
just the usual category \(\mathbf{dg}\Vect(X)\) of complexes of vector bundles on \(X\).
It is also a monoidal category, since we can tensor equivariant bundles and their
endomorphisms in the usual way.

Now let \((X,W)\) be any LG \(B\)-model, and let \((E,d_E)\), \((F,d_F)\) be two
\(B\)-branes on \((X,W)\).  We have a \(\C_R^*\)-equivariant vector bundle
\[
  \cH om(E,F) := E^\vee \otimes F
\]
and this carries an endomorphism
\[
  d_{E,F} \;=\; 1_{E^\vee}\otimes d_F \;-\; d_E^\vee \otimes 1_F
\]
of R-charge \(1\).  One checks that
\[
  d_{E,F}^2 = 0
\]
(the two copies of \(W\) that appear cancel each other).  Thus the pair
\((\cH om(E,F),d_{E,F})\) is an object of \(\mathbf{dg}_R\Vect(X)\).  Furthermore,
given a third \(B\)-brane \((G,d_G)\), we have composition maps
\[
  \cH om(E,F)\otimes \cH om(F,G) \longrightarrow \cH om(E,G)
\]
and these are closed and of degree zero.

\begin{definition}\label{def:curly-Br}
Given an LG-model \((X,W)\) we define a category
\(\mathcal{B}r(X,W)\) \emph{enriched} over the dg-category
\(\mathbf{dg}_R\Vect(X)\).  The objects of \(\mathcal{B}r(X,W)\) are the \(B\)-branes
on \((X,W)\), and the morphisms between two branes \(E\) and \(F\) are given by the
object
\[
  \bigl(\cH om(E,F), d_{E,F}\bigr)
\]
of \(\mathbf{dg}_R\Vect(X)\).
\end{definition}
This is a category enriched over vector bundles on X. We need to pass to global sections to obtain a dg-category whose homotopy category is $D^b(X)$ when $W=0$ and $X$ is smooth.

We now fix a monoidal functor
\[
  R\Gamma : \Vect(X)^{\C_R^*} \longrightarrow \mathbf{dg}\Vect^{\C_R^*}
\]
which sends a \(\C_R^*\)-equivariant vector bundle to a bounded
\(\C_R^*\)-equivariant chain complex of vector spaces computing its
derived global sections.  Since we are working over smooth complex
spaces we will use Dolbeault resolutions and set
\[
  R\Gamma(E) := \bigl(\Gamma(E\otimes \mathcal{A}_X^{0,\bullet}),\,
  \bar\partial\bigr),
\]
though one could equally well use \v{C}ech resolutions with respect to a
\(\C_R^*\)-invariant affine open cover.

Now \(\cH om(E,F)\) is an object of \(\mathbf{dg}_R\Vect(X)\), so we can apply
\(R\Gamma\) to obtain a complex
\[
  R\Gamma\bigl(\cH om(E,F)\bigr)
  = \Gamma\bigl(\cH om(E,F)\otimes \mathcal{A}_X^{0,\bullet}\bigr),
\]
which is a bicomplex, graded by R-charge and by Dolbeault degree, with
total differential \(d_{E,F} + \bar\partial\).  Collapsing this bicomplex,
we regard it as an object of \(\mathbf{dg}\Vect^{\C_R^*}\).

\begin{definition}[dg-category of \(B\)-branes]\label{def:Br}
Given an LG-model \((X,W)\) we define the dg-category of \(B\)-branes to be
\[
  Br(X,W) \;:=\; R\Gamma\bigl(\mathcal{B}r(X,W)\bigr),
\]
i.e.\ we keep the same objects as \(\mathcal{B}r(X,W)\) but replace each
\(\cH om(E,F)\) by the complex \(R\Gamma(\cH om(E,F))\) with differential
\(d_{E,F}+\bar\partial\).
\end{definition}

The monoidality of \(R\Gamma\) ensures that the induced composition maps
\[
  R\Gamma\bigl(\cH om(E,F)\bigr)\otimes
  R\Gamma\bigl(\cH om(F,G)\bigr)
  \longrightarrow
  R\Gamma\bigl(\cH om(E,G)\bigr)
\]
are associative and closed of degree zero, so \(Br(X,W)\) is indeed a
dg-category.

\begin{example}
Let \(W=0\) and assume \(\C_R^*\) acts trivially on \(X\).
Then \(Br(X,0) = \Perf(X)\), the dg-category of perfect complexes on \(X\).
Since \(X\) is smooth, the homotopy category of this dg-category is
\[
  H_0\bigl(Br(X,0)\bigr) \;\cong\; D^b(X).
\]
\end{example}

\begin{remark}
In this talk I will work at the level of the bounded derived category
\(D^b(X)\).  Conceptually, however, \(D^b(X)\) is only the homotopy
category \(H^0\) of a more structured dg-category: when \(W=0\) this is
the dg-category \(\Perf(X)\) of perfect complexes, and for a Landau--Ginzburg
model \((X,W)\) it is the dg-category \(Br(X,W)\) of \(B\)-branes.
The VGIT "window" equivalences appearing in the flop example admit
dg-enhancements: Segal shows that the equivalences
\[
D^b(X_+) \xrightarrow{\;\sim\;} D^b(X_-)
\]
coming from the grade-restriction windows actually arise as
quasi-equivalences between the dg-categories \(Br(X_+,W)\) and
\(Br(X_-,W)\).  Thus the autoequivalences of \(D^b(X_\pm)\) constructed
via magic windows are shadows of honest symmetries at the dg / \(B\)-brane level.
\end{remark}

\subsection{Set-up}
Let $V = \mathbb{C}^4$ with coordinates $x_1, x_2, y_1, y_2$, and let $\mathbb{C}^*$ act on $V$ with weight $1$ on each $x_i$ and weight $-1$ on each $y_i$. There are two possible GIT quotients $X_{+}$ and $X_{-}$, depending on whether we choose a positive or negative character of $\mathbb{C}^*$. Both are isomorphic to the total space of the bundle $\mathcal{O}(-1)^{\oplus 2}$ over $\mathbb{P}^1$. This is the standard "three-fold flop" situation.

Both are open substacks of the Artin quotient stack
\[
  \mathcal{X} = [V/\mathbb{C}^*]
\]
given by the semi-stable locus for either character.
Let
\[
  \iota_{\pm} : X_{\pm} \hookrightarrow \mathcal{X}
\]
denote the inclusions.

\begin{remark}[The quotient stack and its open substacks]
  Recall that via the functor of points perspective, its objects are pairs $(P,\phi)$, where $P$ is a principal $\mathbb{C}^*$-bundle and $\phi: P\to V$ is $\mathbb{C}^*$-equivariant.

  For a given choice of character $\chi_m$, the semistable locus $V^{ss}(\chi_m)$ is an open subset of $V$. It is open because it is defined by the nonvanishing of some semi-invariant sections. The corresponding GIT quotient is $[V^{ss}(\chi_m)/\mathbb{C}^*]$ as a substack.
  Thus:
  \[
    X_\pm = [V^{ss}(\pm 1)/\mathbb{C}^*] \;\subset\; [V/\mathbb{C}^*] = \mathcal{X}
  \]
  It turns out that open substacks of quotient stacks $[V/G]$ are exactly those substacks which are of the form $[U/G]$ where $U\subseteq V$ is a $G$-invariant open subscheme. Here $V^{ss}(\chi_m)\subset V$ is $G$-invariant and open, so $[V^{ss}(\chi_m)/\mathbb{C}^*]\hookrightarrow [V/\mathbb{C}^*]$ is exactly an open immersion of stacks.
\end{remark}

This stacky point of view makes it clear that there are (exact) restriction functors
\[
  \iota_{\pm}^* : D^b(\mathcal{X}) \;\to\; D^b(X_{\pm}).
\]

By $D^b(\mathcal{X})$ we mean the derived category of the category of $\mathbb{C}^*$-equivariant sheaves on $V$. This contains the obvious equivariant line bundles $\mathcal{O}(i)$ associated to the characters of $\mathbb{C}^*$.

\begin{remark}[General fact about open immersions]
  If $j: U \hookrightarrow X$ is an open immersion of schemes, then there is an exact restriction functor $j^*: \mathrm{QCoh}(X) \to \mathrm{QCoh}(U)$. This is because $j^*\cF$ has the same stalk as $\cF$ at points of $U$.

  Althernatively, exactness comes from the fact that restricting a quasi-coherent sheaf to an open set is just tensoring with $\mathcal{O}_U$, which is flat (in general localisation is flat).

  Passing to derived categories, you still have $j^*: D^b(\mathrm{QCoh}(X)) \to D^b(\mathrm{QCoh}(U))$ which has no higher derived functors since $j^*$ is exact. The exact same holds in the stack setting: if $\iota: \mathcal{U} \hookrightarrow \mathcal{X}$ is an open immersion of stacks, you get $\iota^*: D^b(\mathcal{X}) \to D^b(\mathcal{U})$.
\end{remark}
Let
\[
  \mathcal{G}_t \subset D^b(\mathcal{X})
\]
be the triangulated subcategory generated by the line bundles
$\mathcal{O}(t)$ and $\mathcal{O}(t+1)$. This is the smallest thick triangulated subcategory generated by these two objects. This is the \textbf{grade restriction rule} of Hori-Herbst-Page, which informally says if you restrict this window to either quotient $X^\pm$, you recover the derived category $D^b(X^\pm)$.

\begin{claim}
  For any $t \in \mathbb{Z}$, both $\iota_+^*$ and $\iota_-^*$ restrict to give equivalences
  \[
    D^b(X_+) \xleftarrow{\sim} \mathcal{G}_t \xrightarrow{\sim} D^b(X_-).
  \]
\end{claim}
\begin{proof}
The restriction functors
\[
  \iota_\pm^*:\ D^b(\mathcal X)\longrightarrow D^b(X^\pm)
\]
are exact and preserve shifts and cones. To prove that the restrictions
\[
  \iota_\pm^*:\ \mathcal{G}_t \xrightarrow{\ \sim\ } D^b(X^\pm)
\]
are equivalences, we need:
\begin{enumerate}
  \item Fully faithfulness: On $\mathcal{G}_t$, the restriction maps induce isomorphisms
        \[\mathrm{Hom}_{D^b(\mathcal{X})}(E,F) \cong \mathrm{Hom}_{D^b(X^\pm)}(\iota_\pm^*E, \iota_\pm^*F)\]
        Since $\mathcal{G}_t$ is generated by $\{\mathcal{O}(t), \mathcal{O}(t+1)\}$, it suffices to check this on these generators.
        Concretely, we need to compute $\mathrm{Ext}^\bullet_{\mathcal{X}}(\mathcal{O}(t+k), \mathcal{O}(t+l))$ for $k,l\in\{0,1\}$,
        and show it matches the Ext groups in $X^\pm$.

  \item Essential surjectivity: Every object in $D^b(X^\pm)$ should be built out of $\iota_\pm^*\mathcal{G}_t$.
        In other words, the images of $\mathcal{O}(t), \mathcal{O}(t+1)$ generate $D^b(X^\pm)$.
\end{enumerate}


To see that these functors are fully-faithful it suffices to check what they do to the maps
between the generating line-bundles, so we just need to check that
\[
  \operatorname{Ext}^\bullet_{\mathcal{X}}(\mathcal{O}(t+k),\mathcal{O}(t+l))
  = \operatorname{Ext}^\bullet_{X_\pm}(\mathcal{O}(t+k),\mathcal{O}(t+l))
\]
for $k,l \in [0,1]$.
For line bundles, $\operatorname{Ext}^\bullet(\mathcal O(a),\mathcal O(b)) \cong H^\bullet(\,\cdot\,,\ \mathcal O(b-a))$. Thus we need to verify that $H^\bullet_{\mathcal{X}}(\mathcal{O}(i)) = H^\bullet_{X_\pm}(\mathcal{O}(i))$ for $i \in [-1,1]$.

$\mathcal{X}$ is an affine quotient stack (with $V$ affine), so for any equivariant coherent sheaf, higher cohomology on $\mathcal{X}$ vanishes; taking global sections means "equivariant global sections" on $V$. Hence $H^p(\mathcal{X},\mathcal{O}(i))=(\mathcal{O}_V)_i$ for $p=0$ and $0$ for $p>0$, where $(\mathcal{O}_V)_i$ is the weight-$i$ subspace of the polynomial ring $\mathcal{O}_V=\mathbb{C}[V]$.

To compute $H^\bullet(X_\pm,\mathcal{O}(i))$, we use the projection $\pi:X_\pm\to\mathbb{P}^1$ and the fact that $X_\pm$ is the total space of the bundle $\mathcal{O}(-1)^{\oplus 2}$ over $\mathbb{P}^1$. We do the computation for $X^+$; the case of $X^-$ is similar. Let $\pi:X^+\to \mathbb{P}^1$ be the projection and $E=\mathcal{O}(-1)^{\oplus 2}$. Then
\[
  \pi_*\mathcal{O}_{X^+}\cong\operatorname{Sym}^\bullet(E^\vee)
  =\operatorname{Sym}^\bullet(\mathcal{O}(1)^{\oplus 2})
  \cong\bigoplus_{m\ge0}\operatorname{Sym}^m(\mathcal{O}(1)^{\oplus 2})
  \cong\bigoplus_{m\ge0}\mathcal{O}(m)^{\oplus (m+1)}.
\]

\begin{remark}
  Recall that the total space of a vector bundle $E\to X$ is $\underline{\mathrm{Spec}}_X(\operatorname{Sym}^\bullet(E^\vee))$ where we take the relative Spec over $X$. Associated to any sheaf of algebras $\cA$ over a base scheme $B$ is the relative Spec, which is a scheme $Y,\cO_Y$ equipped with a morphism $\pi:Y\to B$. It has the property that $\pi_*\cO_Y=\cA$ and $\pi:Y\to B$ is affine. In our case, the sheaf of algebras is $\operatorname{Sym}^\bullet(E^\vee)$, which is the symmetric algebra on the dual bundle $E^\vee$.

  This means that if locally on $B$ we have $E \cong \mathcal{O}_B^{\oplus r}$ is trivial of rank $r$, then  $\underline{\mathrm{Spec}}_B(\operatorname{Sym}^\bullet(E^\vee))$ means we glue together the affine scheme $\mathrm{Spec}(\mathcal{O}_B[t_1,\dots,t_r])$ fiberwise over $B$. Thus \[\operatorname{Sym}^\bullet(E^\vee) \cong \mathcal{O}_B[t_1,\dots,t_r]\]

  The last isomorphism above can be seen from the general fact that if $L$ is a line bundle and $V$ is a vector space, then $\operatorname{Sym}^m(L\otimes V) \cong L^{\otimes m}\otimes \operatorname{Sym}^m(V)$. Locally trivialize $L$. Then $\operatorname{Sym}^m(L\otimes V)$ is generated by monomials $(\ell\otimes v_1)\cdots (\ell\otimes v_m) = \ell^m \otimes (v_1\cdots v_m)$, which shows the factorization.
\end{remark}

By the projection formula and affineness of $\pi$ \[
  H^p(X^+,\mathcal{O}(k))
  \cong
  H^p\Big(\mathbb{P}^1,\ \pi_*\mathcal{O}_{X^+}\otimes\mathcal{O}(k)\Big)
  \cong
  \bigoplus_{m\ge0} H^p(\mathbb{P}^1,\ \mathcal{O}(k+m))^{\oplus (m+1)}.
\]

\begin{remark}
  Recall that for a morphism $\pi:X\to B$ and a sheaf $F$ on $X$, there is a spectral sequence (Leray) \[E_2^{p,q} = H^p(B, R^q\pi_*F) \Longrightarrow H^{p+q}(X,F)\]

  Since $\pi$ is affine, $R^p\pi_*=0$ for $p>0$.
  So in the Leray spectral sequence, all rows with $q>0$ are zero. That means already on the $E_2$-page, only the bottom row q=0 survives. No differentials are possible, so $E_2=E_\infty$.
Thus
  \[H^p(X,F) \cong H^p(B,\pi_*F)\]

  Therefore we need to compute $\pi_*\mathcal{O}_{X^+} \otimes \mathcal{O}(k)$. The projection formula says: for any quasi-coherent sheaf $F$ on $X$ and any sheaf $G$ on $B$, $\pi_*(F\otimes \pi^*G) \cong \pi_*F \otimes G$. Take $F=\mathcal{O}_X$ and $G=\mathcal{O}_B(k)$. Then: $\pi_*(\mathcal{O}_X\otimes \pi^*\mathcal{O}_B(k)) \cong \pi_*\mathcal{O}_X \otimes \mathcal{O}_B(k)$. But $\mathcal{O}_X\otimes \pi^*\mathcal{O}_B(k)$ is exactly $\mathcal{O}_X(k)$ so \[\pi_*\mathcal{O}_X(k) \cong \pi_*\mathcal{O}_X \otimes \mathcal{O}_B(k)\]
\end{remark}

Now use the standard $\mathbb{P}^1$ cohomology:
\[
  H^0(\mathbb{P}^1,\mathcal{O}(n))=\begin{cases}\mathbb{C}^{\,n+1}& n\ge0\\ 0& n<0\end{cases},\qquad
  H^1(\mathbb{P}^1,\mathcal{O}(n))=\begin{cases}0& n\ge-1\\ \mathbb{C}^{\,(-n-1)}& n\le-2\end{cases}.
\]

So for $p=0$, we get that \begin{align*}
  H^0(X^+,\mathcal O(k)) &\;\cong\;
\bigoplus_{m\ge0} H^0(\mathbb P^1,\mathcal O(k+m))^{\oplus(m+1)} \\
&\;\cong\; \Sym^{k+m}(\mathbb C^2_{x_1,x_2}) \otimes \Sym^m(\mathbb C^2_{y_1,y_2}) \\
\end{align*} which is exactly the weight-$k$ part of $\mathcal O_V=\mathbb C[x_1,x_2,y_1,y_2]$.

For $p=1$, we have \[H^1(X^+,\mathcal O(k))\cong \bigoplus_{m\ge0} H^1(\mathbb P^1,\mathcal O(k+m))^{\oplus(m+1)}\]
 On $\mathbb P^1$, $H^1(\mathcal O(n))=0$ for $n\ge -1$. So if $k\ge -1$ (the window for the flop), then $k+m\ge -1$ for all $m\ge0$, hence $H^1(X^+,\mathcal O(k))=0$. This matches the stack, where all higher $H^p$ vanish because $[V/\mathbb C^*]$ is (relatively) affine. This proves fully faithfulness of $\iota_+^*$ on the window.
\begin{remark}
Note that if $k\leq -2$, then at least the $m=0$ term contributes $H^1(\mathbb{P}^1,\mathcal{O}(k))\neq 0$. Here $H^1$ on $X^+$ is nonzero, while on the stack it is zero - this is exactly where agreement fails outside the window.
\end{remark}


To see that they are essentially surjective we need to know that the two given line bundles generate $D^b(X_\pm)$. That is, every object of $D^b(X^\pm)$ should be quasi-isomorphic to a complex built out of $\iota_\pm^*\mathcal{O}(t)$ and $\iota_\pm^*\mathcal{O}(t+1)$. 
\end{proof}

\begin{remark}
  Essential surjectivity follows from a general theorem which says that on quasi-projective varieties, an ample line bundle and its twists generate the derived category. The intuition behind this statement is Serre's theorem which says that for any coherent sheaf $\mathcal{F}$, $\mathcal{F}(n)$ is globally generated for $n\gg 0$. 

  Pick an ample line bundle $L$ on $X$. Serre vanishing gives, for $m\gg0$ that $H^i(X, F\otimes L^{\otimes m})=0$ for all $i>0$ and any coherent $F$, and $F\otimes L^{\otimes m}$ is globally generated. For $m$ large, the evaluation map is surjective:
  \[
  H^0(X, F(m))\otimes \mathcal O_X \twoheadrightarrow F(m).
  \]
  Twist down by $L^{-m}$:
  \[
  H^0(X, F(m))\otimes L^{-m} \twoheadrightarrow F.
  \]
  So F is a quotient of a finite direct sum of a power of $L^{-1}$. Let $K_1:=\ker(1)$. Then $K_1$ is coherent. Apply Serre vanishing again to $K_1$: choose $m_1\gg0$ so that $K_1(m_1)$ is globally generated and $K_1(m_1))0$ has no higher cohomology. Again we get a surjection
  \[
  H^0(X, K_1(m_1))\otimes L^{-m_1}\twoheadrightarrow K_1,
  \]
  with kernel $K_2$. Continuing this way and using Castelnuovo-Mumford regularity, you can choose $m, m_1,\dots$ so this iteration stops in at most $\dim X+1$ steps, giving a finite resolution:
  \[
  0\to \bigoplus L^{-m_r} \to \cdots \to \bigoplus L^{-m_1}\to \bigoplus L^{-m}\to F\to 0.
  \]

  Thus every coherent $F$ has a finite resolution by direct sums of powers of $L^{-1}$. Passing to derived categories, this means the triangulated subcategory generated by the line bundles $\{L^{\otimes n}\mid n\in\mathbb Z\}$ contains every object of $D^b(\Coh(X))$.

It remains to see that on $X_+$, the two line bundles $\mathcal{O}(t)$ and $\mathcal{O}(t+1)$ generate all powers of $\mathcal{O}(1)$. This follows quickly from Beilinson's theorem on $\mathbb{P}^1$ as follows. The projection $p : X_+ \to \mathbb{P}^1$ is affine so $p_* : \mathrm{Coh}(X_+) \to \mathrm{Coh}(\mathbb{P}^1)$ is exact, and $p^*$ gives an equivalence
\[
\mathrm{Coh}(X_+) \simeq \mathrm{Coh}(\mathbb{P}^1, \mathrm{Sym}(E^\vee)).
\]
So every coherent sheaf (or complex) on $X_+$ is a module over the quasi-coherent algebra $\mathrm{Sym}(E^\vee)$ on $\mathbb{P}^1$ where $X_+ = \underline{\mathrm{Spec}}_{\mathbb{P}^1}(\mathrm{Sym}(E^\vee))$. By Beilinson's theorem on $\mathbb{P}^1$, we have:
\[
D^b(\mathbb{P}^1) = \langle \mathcal{O}_{\mathbb{P}^1}(t), \mathcal{O}_{\mathbb{P}^1}(t+1) \rangle.
\]
That is, any bounded complex of coherent sheaves on $\mathbb{P}^1$ can be built out of just these two line bundles by taking cones, shifts, and summands. Note that $p^*\mathcal{O}_{\mathbb{P}^1}(t) = \mathcal{O}_{X_+}(t)$. Given $F \in D^b(\mathrm{Coh}\,X_+)$, you can write $p_*F \in D^b(\mathrm{Coh}\,\mathbb{P}^1)$ as a complex built from $\mathcal{O}_{\mathbb{P}^1}(t)$ and $\mathcal{O}_{\mathbb{P}^1}(t+1)$ by Beilinson. Applying $p^*$ to that construction gives you a complex built from their pullbacks $\mathcal{O}_{X_+}(t)$ and $\mathcal{O}_{X_+}(t+1)$. Hence
\[
D^b(X_+) = \langle \mathcal{O}_{X_+}(t),\; \mathcal{O}_{X_+}(t+1) \rangle.
\]
\end{remark}



So for any $t\in\mathbb{Z}$ we have a derived equivalence
\[
  \Phi_t : D^b(X_+) \;\xrightarrow{\ \sim\ }\; D^b(X_-)
\]
passing through $\mathcal{G}_t$. Composing these, we get auto-equivalences
\[
  \Phi_{t+1}^{-1}\Phi_t : D^b(X_+) \;\xrightarrow{\ \sim\ }\; D^b(X_+).
\]
To see what these do, we need to check them on the generating set of line-bundles
$\{\mathcal{O}(t), \mathcal{O}(t+1)\}$. 
\begin{remark}
  $\Phi_t$ identifies $D^b(X_+)$ and $D^b(X_-)$ through the common window $\mathcal G_t$. Thus:
  \[
  \Phi_t(\mathcal{O}(t)) = \mathcal{O}(t)_{X_-}, \qquad 
  \Phi_t(\mathcal{O}(t+1)) = \mathcal{O}(t+1)_{X_-}.
  \]
  So $\Phi_t$ just sends the line bundles to the same ones on the other phase. Now, when we apply $\Phi_{t+1}^{-1}$ (the inverse equivalence for the next window) to these line bundles on $X_-$, we have to interpret them as objects of the new window $\mathcal G_{t+1} = \langle \mathcal{O}(t+1), \mathcal{O}(t+2)\rangle$.

  But $\mathcal{O}(t)$ is not in that window. So we must rewrite $\mathcal{O}(t)$ in terms of $\mathcal{O}(t+1)$ and $\mathcal{O}(t+2)$. Consider the Koszul resolution resolving the structure sheaf of the unstable locus $\{y_1=y_2=0\}$:
\[
  0 \to \mathcal{O}_V(2) \xrightarrow{(y_2,-y_1)} \mathcal{O}_V(1)^{\oplus 2} \xrightarrow{(y_1,y_2)} \mathcal{O}_V \to \cO_V/\{y_1=y_2=0\} \to 0
\]
Restricting to $X^+$, this resolution restricts to a resolution of the structure sheaf of the zero section $\Sigma = \mathbb{P}^1_{x_1:x_2} \subset X^+$, i.e. the subvariety $\{y_1=y_2=0\}$ inside $X^+$ where $\cO_{X^+}(k)$ denotes the restriction of $\cO_V(k)$ to $X^+$:
\[
  0 \to \mathcal{O}_{X^+}(k+2) \to \mathcal{O}_{X^+}(k+1)^{\oplus 2} \to \mathcal{O}_{X^+}(k) \to \mathcal{O}_{\Sigma}(k) \to 0
\]
Restricting the same sequence to $X^-$, the resolution becomes exact at the end since the unstable locus $\{y_1=y_2=0\}$ is removed in $X^-$. Thus on $X^-$ we have a quasi-isomorphism:
\[
  \mathcal{O}_{X^-}(k) \simeq \big[ \mathcal{O}_{X^-}(k+2) \xrightarrow{(y_2,-y_1)} \mathcal{O}_{X^-}(k+1)^{\oplus 2} \big]
\] 
\end{remark}

Thus we have shown that \begin{align*}
  \Phi_{t+1}^{-1}\Phi_t(\mathcal{O}(t))
  &\simeq \Phi_{t+1}^{-1}(\mathcal{O}(t)_{X_-}) \\
  &\simeq \Phi_{t+1}^{-1}\Big(\big[\mathcal{O}(t+2)_{X_-} \xrightarrow{(y_2,-y_1)} \mathcal{O}(t+1)_{X_-}^{\oplus 2}\big]\Big) \\
  &\simeq \big[\mathcal{O}(t+2) \xrightarrow{(y_2,-y_1)} \mathcal{O}(t+1)^{\oplus 2}\big], \\
  \Phi_{t+1}^{-1}\Phi_t(\mathcal{O}(t+1))
  &\simeq \Phi_{t+1}^{-1}(\mathcal{O}(t+1)_{X_-}) \\
  &\simeq \mathcal{O}(t+1).
\end{align*}

This autoequivalence $\Phi_{t+1}^{-1}\Phi_t$ is an example of a spherical twist.
\begin{definition}
  A \textbf{spherical twist} is an autoequivalence discovered by \cite{seidel-thomas} associated to any
spherical object in the derived category, i.e.\ an object $S$ such that
\[
  \operatorname{Ext}(S,S) = \mathbb{C} \oplus \mathbb{C}[-n]
\]
for some $n$ (i.e.\ the homology of the $n$-sphere). It sends any object $\mathcal{E}$ to the cone on the evaluation map
\[
  \big[ \operatorname{RHom}(S,\mathcal{E}) \otimes S \;\longrightarrow\; \mathcal{E} \big].
\]
The inverse twist sends $\mathcal{E}$ to the cone on the dual evaluation map
\[
  \big[ \mathcal{E} \;\longrightarrow\; \operatorname{RHom}(\mathcal{E},S)^\vee \otimes S \big].
\]
\end{definition}



\begin{claim}
The object $\mathcal{O}_{\mathbb{P}^1_{x_1:x_2}}(t) \simeq \iota_+K_{-}(t)$ is spherical for the derived category $D^b(X_+)$, and the inverse twist around it sends $\mathcal{O}(t+1)$ to itself and $\mathcal{O}(t)$ to the cone
\[
  \big[\mathcal{O}(t) \longrightarrow \iota_+K_{-}(t)\big]
  \simeq \big[\mathcal{O}(t+2) \xrightarrow{(-y_2,y_1)} \mathcal{O}(t+1)^{\oplus 2}\big],
\]
which agrees with $\Phi_{t+1}^{-1}\Phi_t$. 
\end{claim}



\begin{remark}
Let $\Sigma = \mathbb{P}^1_{x_1:x_2} \subset X_+$ be the zero section. Then $\mathcal{O}_\Sigma(t)$ is supported on a 1-dimensional subvariety, and we will show that it is spherical, i.e. that
  \[
  \operatorname{Ext}^i_{X_+}(\mathcal{O}_\Sigma(t),\mathcal{O}_\Sigma(t))
  \cong
  H^i(\Sigma,\mathcal{O}_\Sigma) \oplus H^{i-2}(\Sigma,\mathcal{O}_\Sigma)
  \cong
  \begin{cases}
  \mathbb{C} & i=0,\\
  \mathbb{C} & i=2,\\
  0 & \text{otherwise.}
  \end{cases}
  \]
Let $i:\Sigma\hookrightarrow X_+$ be the zero section. Then $\mathcal{O}_\Sigma(t) = i_*\mathcal{O}_\Sigma(t)$. We need to compute
\[
\operatorname{Ext}^i_{X_+}(i_*\mathcal{O}_\Sigma(t), i_*\mathcal{O}_\Sigma(t)).
\]
For a regular embedding $i:\Sigma\hookrightarrow X_+$ of codimension 2 there is a well-known identity (Proposition \ref{prop:ext-closed-immersion}):
\[
\operatorname{Ext}^i_{X_+}(i_*F, i_*G) \cong \bigoplus_{p=0}^{2} \operatorname{Ext}^{i-p}_{\Sigma}(F, G\otimes \wedge^p N_{\Sigma/X_+}).
\]
The normal bundle of a zero section in the total space of a vector bundle $E\to B$ is canonically identified with $E$ itself:
\[
N_{\Sigma/X_+} = \mathcal{O}_\Sigma(-1)^{\oplus2}, \quad
\wedge^0 N = \mathcal{O}, \quad
\wedge^1 N = \mathcal{O}(-1)^{\oplus2}, \quad 
\wedge^2 N = \mathcal{O}(-2).
\]

Therefore,
\[
\operatorname{Ext}^i_{X_+}(\mathcal{O}_\Sigma(t),\mathcal{O}_\Sigma(t)) \cong
H^i(\Sigma,\mathcal{O}_\Sigma) \oplus
H^{i-1}(\Sigma,\mathcal{O}_\Sigma(-1))^{\oplus2} \oplus
H^{i-2}(\Sigma,\mathcal{O}_\Sigma(-2)).
\]

Now we can compute these cohomology groups on $\Sigma=\mathbb{P}^1$ using:
\[
H^0(\mathbb{P}^1,\mathcal{O}(n)) = \begin{cases}
\mathbb{C}^{n+1}, & n\ge0 \\
0, & n<0
\end{cases}, \quad
H^1(\mathbb{P}^1,\mathcal{O}(n)) = \begin{cases}
0, & n\ge -1 \\
\mathbb{C}^{-n-1}, & n\le -2
\end{cases}
\]

Substituting into our formula above, we see that the only nonzero contributions occur at $i=0$ from \(H^0(\cO)\cong\C\), and at $i=2$ from \(H^0(\cO(-2))[2]\) shifting to degree $2$ via the $i-2$ term.
  \end{remark}
  We now want to see what the inverse spherical twist $T_S^{-1}$ does to the generators $\mathcal{O}(t)$ and $\mathcal{O}(t+1)$ where $S=\mathcal{O}_\Sigma(t)$ is our spherical object.
\begin{remark}[Action on \(\mathcal{O}(t+1)\)]

  For $\mathcal{O}(t+1)$, we have $R\Hom(\mathcal{O}(t+1),S) = \Hom_{\text{Coh}(X_+)}(\cO_{X_+}(t+1),\cO_\Sigma(t))$ because we are dealing with sheaves both sitting in degree zero. But for any sheaf $E$ on $X_+$, we have \[\Hom_{X_+}(E, i_*F) \cong \Hom_{\Sigma}(i^*E, F)\] because $i_*$ is fully faithful on the abelian subcategory of sheaves supported on $\Sigma$. Thus
\[
\Hom_{X_+}\big(\mathcal{O}_{X_+}(t+1), i_*\mathcal{O}_\Sigma(t)\big)
\cong
\Hom_{\Sigma}\big(i^*\mathcal{O}(t+1), \mathcal{O}_\Sigma(t)\big).
\]
The restriction of $\mathcal{O}(t+1)$ to the zero section is $i^*\mathcal{O}(t+1) = \mathcal{O}_\Sigma(t+1)$, since $\mathcal{O}(k)$ on $X_+$ is pulled back from the base $\Sigma$ with the same twisting character. So we see that 
\[
\Hom_{\Sigma}\!\big(\mathcal{O}_\Sigma(t+1), \mathcal{O}_\Sigma(t)\big)
= H^0\big(\Sigma, \mathcal{O}_\Sigma(t - (t+1))\big)
= H^0\big(\Sigma, \mathcal{O}_\Sigma(-1)\big) = 0
\]
If \(R\!\Hom(E,S)=0\), the cone of the zero map is just $E$ itself. Hence \[T_S^{-1}(\mathcal O(t+1)) = \mathcal O(t+1)\]
\end{remark}

\begin{remark}[Action on \(\mathcal{O}(t)\)]
Let
\[
A \;:=\; \big[\;\mathcal{O}(t+2)\xrightarrow{(y_2,-y_1)}\mathcal{O}(t+1)^{\oplus2}\;\big]
\]
in degrees $-1\to 0$. By the Koszul short exact sequence
\[
0\to \mathcal{O}(t+2)\xrightarrow{(y_2,-y_1)}\mathcal{O}(t+1)^{\oplus2}\twoheadrightarrow \mathcal{I}_\Sigma(t)\to 0,
\]
the canonical projection $q: A \to \mathcal{I}_\Sigma(t)[0]$ is a quasi-isomorphism since $H^{-1}(A)=0$ and $H^{0}(A)\cong \mathcal{I}_\Sigma(t)$.

Let $\iota:\mathcal{I}_\Sigma(t)\hookrightarrow \mathcal{O}(t)$ be the inclusion, and set
$\phi \;:=\; \iota\circ q \;:\; A \longrightarrow \mathcal{O}(t)$
which is a map of complexes where on degree 0 it is given by $ \cO(t+1)^{\oplus2}\twoheadrightarrow\mathcal{I}_\Sigma(t)\hookrightarrow \mathcal{O}(t)$ and on degree $-1$ it's 0.

The key calculation is to show that $\mathrm{Cone}(\phi)\cong S$. With $A^{-1}=\mathcal{O}(t+2)$ and $A^{0}=\mathcal{O}(t+1)^{\oplus2}$, the cone is a three-term complex supported in degrees $-1,0,1$:
\[
\mathrm{Cone}(\phi)\;=\;
\Big[\; A^{-1} \xrightarrow{d_{-1}} A^{0}\oplus \mathcal{O}(t)\xrightarrow{d_0}\ \mathcal{O}(t) \;\Big]
\]
where $d_{-1}(a)
= (-d_A(a), \phi(a))
= (-(y_2,-y_1)a, 0)$ and $d_0(a,b) = (y_1,y_2)(a)-b$.

Computing the cohomology of this complex, we find that:
$H^{0}(\mathrm{Cone}(\phi))$ is $\ker d_0 / \operatorname{im} d_{-1}$. The condition $d_0(a,b)=0$ says $b=(y_1,y_2)(a)$; modulo the image of $A^{-1}$ this identifies $H^0$ with \[\operatorname{coker}((y_1,y_2):\mathcal{O}(t+1)^{\oplus2}\to \mathcal{O}(t))=\mathcal{O}(t)/\mathcal{I}_\Sigma(t)=S\] 
 $H^{1}(\mathrm{Cone}(\phi))= \operatorname{coker} d = 0$ since a check shows $d_0$ is surjective. Also $H^{-1}(\mathrm{Cone}(\phi)) = \ker d_{-1} = 0$ since $(y_2,-y_1)$ is injective.

Therefore $\mathrm{Cone}(\phi)$ is quasi-isomorphic to $S$ concentrated in degree 0: $\mathrm{Cone}(\phi)\ \simeq\ S[0]$.

From the triangle
\[
A \xrightarrow{\ \phi\ } \mathcal{O}(t) \longrightarrow \mathrm{Cone}(\phi) \longrightarrow A[1]
\]
and $\mathrm{Cone}(\phi)\simeq S$, we get
\[
\mathrm{Cone}\big(\mathcal{O}(t)\to S\big)[-1]\ \simeq\ A
\;=\;
\Big[\;\mathcal{O}(t+2)\xrightarrow{(-y_2,\,y_1)}\mathcal{O}(t+1)^{\oplus2}\;\Big].
\]
So we have shown that the inverse spherical twist acts as
\[
T^{-1}_{S}(\mathcal{O}(t))
\;=\;
\mathrm{Cone}\big(\mathcal{O}(t)\to S\big)[-1]
\;\cong\;
\Big[\mathcal{O}(t+2)\xrightarrow{(-y_2,\,y_1)}\mathcal{O}(t+1)^{\oplus2}\Big].
\]
\end{remark}

To complete the proof of the claim we would just need to check that the two functors also agree on the Hom-sets between $\mathcal{O}(t)$ and $\mathcal{O}(t+1)$.

Now instead let $V = \mathbb{C}^{p+q}$ with co-ordinates $x_1,\ldots,x_p, y_1,\ldots,y_q$.
Let $\mathbb{C}^*$ act linearly on $V$ with positive weights on each $x_i$ and negative weights
on each $y_i$. The two GIT quotients $X_+$ and $X_-$ are both the total spaces of orbi-vector
bundles over weighted projective spaces.

We must assume the Calabi-Yau condition that $\mathbb{C}^*$ acts through $SL(V)$. Let $d$ be the
sum of the positive weights, so the sum of the negative weights is $-d$. The above argument goes
through word-for-word, where now
\[
  \mathcal{G}_t = \langle \mathcal{O}(t), \ldots, \mathcal{O}(t+d-1)\rangle.
\]

\section{Derived categories}
In this appendix we collect some definitions and facts about derived categories. We prove the classical reconstruction theorem of Bondal-Orlov for varieties with ample or anti-ample canonical bundle.
\subsection{Basic definitions}
Let $\mathcal{A}$ be an abelian category. The derived category $D(\mathcal{A})$ is constructed in several steps. Consider the category $C(\mathcal{A})$ of complexes in $\mathcal{A}$, whose objects are cochain complexes and morphisms are chain maps that commute with the differentials.  

Form the homotopy category $K(\mathcal{A})$ whose objects are the same as $C(\mathcal{A})$.

The morphisms are chain maps modulo homotopy equivalence. Two chain maps \[f,g:A^\bullet\to B^\bullet\] are homotopic if there exist morphisms $h^i:A^i\to B^{i-1}$ such that \[f^i - g^i = d_B^{i-1} \circ h^i + h^{i+1} \circ d_A^i\] It is a routine check that two maps which are homotopic induce the same map on cohomology.

Finally form $D(\mathcal{A})$ by formally inverting all quasi-isomorphisms in $K(\mathcal{A})$. The morphisms in $D(\mathcal{A})$ are a little subtle. For example, one cannot just introduce formal inverses to quasi-isomorphisms. If $X$ is not an injective object in $\mathcal{A}$, then the inclusion map $X[0] \to I^\bullet$ into an injective resolution is a quasi-isomorphism. If we formally invert by introducing $p: I^\bullet \to X[0]$ with \begin{align*}
    [p] \circ [i] = [\mathrm{id}_{X[0]}] \quad \text{in } K(\mathcal{A}) \\
    [i] \circ [p] = [\mathrm{id}_{I^\bullet}] \quad \text{in } K(\mathcal{A})
  \end{align*} then by definition, we impose that $i,p$ are homotopy equivalences.  This is too strong, since not every quasi-isomorphism is a homotopy equivalence.

Abstractly, let $S$ be the set of quasi-isomorphisms in $K(\mathcal{A})$. The derived category \[D(\mathcal{A}) = K(\mathcal{A})[S^{-1}]\] is characterized by a universal property: there is a functor
  \[
  Q : K(\mathcal{A}) \longrightarrow D(\mathcal{A})
  \]
  sending every $s \in S$ to an isomorphism, and universal with that property (any other functor inverting all quasi-isomorphisms factors uniquely through $Q$). One can also describe morphisms in $D(\mathcal{A})$ concretely as "roofs" via Verdier localization. The bounded derived category $D^b(\mathcal{A})$ is the full subcategory of complexes with bounded cohomology.

  \begin{definition}
    [Mapping cone] For a chain map $s:X^\bullet\to I^\bullet$ (cohomological grading), the \textbf{mapping cone} $\mathrm{Cone}(s)$ is the complex
    \[
    \mathrm{Cone}(s)^n = I^n \oplus X^{n+1}, \qquad d(b,a) = \big(d_I b + s(a),\; -d_X a\big).
    \]
  \end{definition} 
  There's a short exact sequence of complexes
    \[
    0\to I^\bullet \xrightarrow{\iota} \mathrm{Cone}(s) \xrightarrow{\pi} X^\bullet[1]\to 0,
    \]
  giving rise to a long exact sequence in cohomology
    \[\cdots \to H^{n}(I^\bullet) \xrightarrow{H^n(\iota)} H^{n}(\mathrm{Cone}(s)) \xrightarrow{H^n(\pi)} H^{n+1}(X^\bullet) \xrightarrow{H^{n+1}(s)} H^{n+1}(I^\bullet) \to \cdots\]

    \begin{proposition}
      Let $s:X^\bullet\to I^\bullet$ be a chain map in $C(\mathcal{A})$. Then:
      \begin{enumerate}
        \item $s$ is a quasi-isomorphism if and only if $\mathrm{Cone}(s)$ is acyclic (all cohomology groups vanish).

        \item $s$ is an isomorphism in $K(\mathcal{A})$ (i.e., a homotopy equivalence) if and only if $\mathrm{Cone}(s)$ is contractible (chain-homotopic to 0).
      \end{enumerate}
    \end{proposition}

\begin{proof}
  \leavevmode
\begin{enumerate}
  \item ($\Rightarrow$) If $s$ is a quasi-isomorphism, then each $H^{n+1}(s)$ is an isomorphism. In the exact segment 
  \[
  H^n(I)\to H^n(\mathrm{Cone}(s))\to H^{n+1}(X)\xrightarrow{H^{n+1}(s)} H^{n+1}(I),
  \]
  the image of $H^n(\mathrm{Cone}(s))\to H^{n+1}(X)$ is $\ker H^{n+1}(s)=0$, so $H^n(I)\to H^n(\mathrm{Cone}(s))$ is surjective. Looking one step earlier,
  \[
  H^{n}(X)\xrightarrow{H^{n}(s)} H^{n}(I)\to H^n(\mathrm{Cone}(s)),
  \]
  the image of $H^{n}(s)$ is all of $H^{n}(I)$, so the map $H^{n}(I)\to H^n(\mathrm{Cone}(s))$ has zero kernel. Combining "surjective" and "zero kernel" forces $H^n(\mathrm{Cone}(s))=0$ for all $n$. So $\mathrm{Cone}(s)$ is acyclic.

  ($\Leftarrow$) If $\mathrm{Cone}(s)$ is acyclic, then $H^n(\mathrm{Cone}(s))=0$ for all $n$. The exact segment becomes
  \[
  0\to H^{n+1}(X)\xrightarrow{H^{n+1}(s)} H^{n+1}(I)\to 0,
  \]
  so each $H^{n+1}(s)$ is an isomorphism. Hence $s$ is a quasi-isomorphism.


  \item If $s$ has a homotopy inverse $t$ (so $ts\simeq \mathrm{id}_X$, $st\simeq \mathrm{id}_I$), then the triangle
  \[
  X^\bullet \xrightarrow{s} I^\bullet \to \mathrm{Cone}(s) \to X^\bullet[1]
  \]
  is isomorphic (in $K$) to
  \[
  X^\bullet \xrightarrow{\mathrm{id}} X^\bullet \to \mathrm{Cone}(\mathrm{id}_X) \to X^\bullet[1].
  \]

  For any complex $X^\bullet$, $\mathrm{Cone}(\mathrm{id}_X)$ is contractible with contracting homotopy
  \[
  H^n : X^n \oplus X^{n+1} \longrightarrow X^{n-1} \oplus X^{n},\qquad
  H^n(x,y)=(0,x).
  \]
  One can check that $dH+Hd=\mathrm{id}$. Thus $\mathrm{Cone}(s)$ is contractible.
  \end{enumerate}
\end{proof}
\begin{example}
  Let $\mathcal{A}=\mathbf{Ab}$. Take the injective resolution of $\mathbb{Z}$:
  \[
  0 \to \mathbb{Z} \xrightarrow{i} \mathbb{Q} \xrightarrow{q} \mathbb{Q}/\mathbb{Z} \to 0
  \]
  and regard $I^\bullet$ as $I^0=\mathbb{Q}$, $I^1=\mathbb{Q}/\mathbb{Z}$ with $d^0=q$, and $X^\bullet=\mathbb{Z}[0]$. The resolution map $s:\mathbb{Z}[0]\to I^\bullet$ has $s^0=i$.

  Compute the cone. By the definition above,
  \[
  \mathrm{Cone}(s)^{-1}=\mathbb{Z},\quad
  \mathrm{Cone}(s)^0=\mathbb{Q},\quad 
  \mathrm{Cone}(s)^1=\mathbb{Q}/\mathbb{Z}
  \]
  with differentials $d^{-1}=i:\mathbb{Z}\to\mathbb{Q}$ and $d^{0}=q:\mathbb{Q}\to\mathbb{Q}/\mathbb{Z}$. So $\mathrm{Cone}(s)$ is exactly the three-term complex sitting in degrees $-1,0,1$.
  \[
  \mathbb{Z} \xrightarrow{i} \mathbb{Q} \xrightarrow{q} \mathbb{Q}/\mathbb{Z}
  \]
  The cone is acyclic: the short exact sequence $0\to \mathbb{Z} \to \mathbb{Q} \to \mathbb{Q}/\mathbb{Z} \to 0$ is exact, so the cone's cohomology vanishes. However, it is not contractible: contractibility of this 3-term exact complex is equivalent to the short exact sequence splitting (a contracting homotopy gives splittings and vice versa). But $0\to \mathbb{Z} \to \mathbb{Q} \to \mathbb{Q}/\mathbb{Z} \to 0$ does not split: if it did, $\mathbb{Z}$ would be a direct summand of the divisible group $\mathbb{Q}$, hence divisible itself, which is false.

  Therefore $s$ is a quasi-isomorphism whose cone is acyclic but not contractible; hence $s$ is not a homotopy equivalence and cannot be inverted in $K(\mathcal{A})$.
\end{example}

\begin{definition}
  [Triangulated category] A \textbf{triangulated category} is an additive category $\mathcal{T}$ equipped with an autoequivalence $[1]:\mathcal{T}\to\mathcal{T}$ (the shift functor) and a class of distinguished triangles
  \[X \xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]\]
  satisfying the following axioms:
  \begin{itemize}
    \item (TR1) For every morphism $f:X\to Y$ in
          $\mathcal{T}$, there exists a distinguished triangle
          \[
            X \xrightarrow{f} Y \longrightarrow Z \longrightarrow X[1].
          \]
          Moreover, for every object $X\in\mathcal{T}$, the triangle
          \[
            X \xrightarrow{\mathrm{id}_X} X \longrightarrow 0 \longrightarrow X[1]
          \]
          is distinguished, and any triangle isomorphic to a distinguished triangle is distinguished.
    \item (TR2) A triangle
          \[X \xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]\]
          is distinguished if and only if the rotated triangle
          \[Y \xrightarrow{g} Z \xrightarrow{h} X[1] \xrightarrow{-f[1]} Y[1]\]
          is distinguished.
    \item (TR3) Given two distinguished triangles
          \[X \xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]\]
                and
                \[U \xrightarrow{p} V \xrightarrow{q} W \xrightarrow{r} U[1],\]
                and morphisms $a:X\to U$, $b:Y\to V$ such that $b\circ f = p \circ a$, there exists a morphism $c:Z\to W$ making the following diagram commute:
                \[
\begin{tikzcd}
X \arrow[r,"f"] \arrow[d,"a"'] 
  & Y \arrow[r,"g"] \arrow[d,"b"'] 
  & Z \arrow[r,"h"] \arrow[d,"c"'] 
  & X[1] \arrow[d,"{a[1]}"] \\
U \arrow[r,"p"'] 
  & V \arrow[r,"q"'] 
  & W \arrow[r,"r"'] 
  & U[1]
\end{tikzcd}
\]
          
    \item (TR4) (Octahedral axiom) Given morphisms $X \xrightarrow{f} Y \xrightarrow{g} Z$ in $\mathcal{T}$, there exist distinguished triangles
          \[X \xrightarrow{f} Y \xrightarrow{u} C(f) \xrightarrow{v} X[1],\]
          \[Y \xrightarrow{g} Z \xrightarrow{u'} C(g) \xrightarrow{v'} Y[1],\]
          and
          \[X \xrightarrow{g\circ f} Z \xrightarrow{u''} C(g\circ f) \xrightarrow{v''} X[1],\]
          along with morphisms $C(f) \xrightarrow{w} C(g\circ f)$ and $C(g) \xrightarrow{w'} C(g\circ f)$ such that the following diagram commutes and the rows and columns are distinguished triangles:
          \[\begin{tikzcd}
            & Y \arrow[rr, "u"] \arrow[dd, "g"'] & & C(f) \arrow[dd, "w"] \\
            X \arrow[ur, "f"] \arrow[dr, "g\circ f"'] & & & \\
            & Z \arrow[rr, "u'"'] & & C(g)
          \end{tikzcd}\]
  \end{itemize}
\end{definition}

\begin{proposition}
  This construction gives $D(\mathcal{A})$ the structure of a triangulated category, where:
\begin{itemize}
  \item The shift functor $[1]$ moves complexes one place to the left:
  \[X^\bullet[1]^n = X^{n+1}, \quad d_{X[1]}^n = -d_X^{n+1}\]
  \item Distinguished triangles come from mapping cones of chain maps.
  \item The cohomology functors are first defined on the homotopy category as functors \[H^i_K: K(\mathcal{A}) \to \mathcal{A}\] Since these functors send quasi-isomorphisms to isomorphisms, they descend through the localization map $Q: K(\mathcal{A}) \to D(\mathcal{A})$. In particular, there exists a unique functor \[H^i_D: D(\mathcal{A}) \to \mathcal{A}\] such that $H^i_K = H^i_D \circ Q$.
\end{itemize}
\end{proposition}

In the Bondal-Orlov paper, they work with more relaxed categories known as graded categories. In particular every triangulated category is a graded category.
\begin{definition}[Graded categories and exact functors]
A \textbf{graded category} is a pair $(\mathcal{D}, T_{\mathcal{D}})$ consisting of a category $\mathcal{D}$ and a fixed autoequivalence
\[
T_{\mathcal{D}} : \mathcal{D} \longrightarrow \mathcal{D},
\]
called the \textbf{translation functor}.


A functor
\[
F : \mathcal{D} \longrightarrow \mathcal{D}'
\]
between graded categories is called \textbf{graded} if it commutes with the translation functors.
More precisely, there is a fixed natural isomorphism of functors
\[
t_F : F \circ T_{\mathcal{D}} \;\xrightarrow{\sim}\; T_{\mathcal{D}'} \circ F.
\]
A natural transformation $\mu : F \Rightarrow G$ between graded functors is called \textbf{graded}
if the following diagram commutes:
\[
\begin{tikzcd}
F \circ T \arrow[r, "t_F"] \arrow[d, "\mu T"'] & T \circ F \arrow[d, "T\mu"] \\
G \circ T \arrow[r, "t_G"'] & T \circ G.
\end{tikzcd}
\]


A graded functor
\[
F : \mathcal{D} \longrightarrow \mathcal{D}'
\]
between triangulated categories is called \textbf{exact} if it sends exact triangles
to exact triangles in the following sense.

If
\[
X \xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} T X
\]
is an exact triangle in $\mathcal{D}$, then one replaces the segment
\[
F T(X)
\]
by
\[
T F(X)
\]
via the natural isomorphism $t_F : F T \xrightarrow{\sim} T F$,
and requires that the resulting sequence
\[
F X \xrightarrow{F f} F Y \xrightarrow{F g} F Z \xrightarrow{t_F(Fh)} T F X
\]
be an exact triangle in $\mathcal{D}'$.

Finally, a \textbf{morphism between exact functors} is, by definition,
a graded natural transformation.
\end{definition}

\begin{proposition}
Let $F : \mathcal{D} \longrightarrow \mathcal{D}'$ be a graded functor between graded categories, and let
$G : \mathcal{D}' \longrightarrow \mathcal{D}$
be its left adjoint, so that the unit and counit of the adjunction are the natural transformations
\[
\operatorname{id}_{\mathcal{D}'} \xrightarrow{\ \alpha\ } F \circ G, 
\qquad
G \circ F \xrightarrow{\ \beta\ } \operatorname{id}_{\mathcal{D}}.
\]
Then \(G\) can be canonically endowed with the structure of a graded functor, so that the unit and counit of the adjunction become morphisms of graded functors. If, in addition, \(F\) is an exact functor between triangulated categories, then \(G\) also becomes an exact functor.
\end{proposition}


\begin{definition}
  
Let $\mathcal{D}$ be a $k$-linear category with finite-dimensional $\mathrm{Hom}$'s.
A covariant additive functor
\[
S : \mathcal{D} \longrightarrow \mathcal{D}
\]
is called a \textbf{Serre functor} if it is a category equivalence and there are given bifunctorial isomorphisms
\[
\varphi_{A,B} : \mathrm{Hom}_{\mathcal{D}}(A,B) \;\xrightarrow{\ \sim\;}\; \mathrm{Hom}_{\mathcal{D}}(B,SA)^{*}
\]
for all $A,B \in \mathcal{D}$, such that the following diagram is commutative:
\[
\begin{tikzcd}
\mathrm{Hom}_{\mathcal{D}}(A,B)
  \arrow[r,"\varphi^{A,B}"]
  \arrow[d]
  & \mathrm{Hom}_{\mathcal{D}}(B,SA)^{*}
  \arrow[d] \\
\mathrm{Hom}_{\mathcal{D}}(SA,SB)
  \arrow[r,"\varphi^{SA,SB}"']
  & \mathrm{Hom}_{\mathcal{D}}(SB,S^{2}A)^{*}
\end{tikzcd}
\]
The vertical isomorphisms in this diagram are those induced by $S$.

\end{definition}

\begin{proposition}
Any autoequivalence
\[
\Phi : \mathcal{D} \longrightarrow \mathcal{D}
\]
commutes with a Serre functor, i.e.\ there exists a natural graded isomorphism of functors
\[
\Phi \circ S \;\xrightarrow{\;\sim\;}\; S \circ \Phi.
\]
\end{proposition}

\begin{proof}
For any pair of objects $A,B \in \mathcal{D}$, we have a system of natural isomorphisms:
\[
\mathrm{Hom}(\Phi A, \Phi SB)
  \;\cong\;
\mathrm{Hom}(A, SB)
  \;\cong\;
\mathrm{Hom}(B, A)^{*}
  \;\cong\;
\mathrm{Hom}(\Phi B, \Phi A)^{*}
  \;\cong\;
\mathrm{Hom}(\Phi A, S\Phi B).
\]
Since $\Phi$ is an equivalence, the essential image of $\Phi$ covers all of $\mathcal{D}$; that is,
every object is isomorphic to some $\Phi A$.
Hence we have isomorphisms of contravariant functors represented by the objects
$\Phi SB$ and $S\Phi B$.
By Brown's representability lemma, morphisms between representable functors correspond
bijectively to morphisms between their representing objects.
This yields a canonical isomorphism
\[
\Phi SB \;\xrightarrow{\;\sim\;}\; S\Phi B,
\]
which is in fact natural in $B$.
\end{proof}
A Serre functor in a category $\mathcal{D}$, if it exists, is unique up to a graded natural isomorphism. By definition it is intrinsically related to the structure of the category.
We shall use this later to reconstruct a variety from its derived category and to find
the group of exact autoequivalences for algebraic varieties with ample either canonical
or anticanonical sheaf.

\subsection{Reconstruction theorem}
Let $X$ be a smooth projective variety over a field $k$ with either ample or antiample canonical sheaf $\omega_X$. Let $n = \dim X$, $\cD = D^b_{\mathrm{coh}}(X)$ be the bounded derived category of coherent sheaves on $X$.

\begin{proposition}
  $\cD$ has a Serre functor $S$ given by
  \[S(-) = - \otimes \omega_X [n]\]
\end{proposition}

\begin{proof}
  Grothendieck-Serre duality gives bifunctorial isomorphisms
  \[\Ext^i_X(F,G) \cong \Ext^{n-i}_X(G, F \otimes \omega_X)^*\]
  for all coherent sheaves $F,G$ on $X$. This extends to complexes in $\cD$ by taking injective resolutions. Thus $S$ is a Serre functor.
\end{proof}
  \begin{definition}[Point object]
An object $P \in \mathcal{D}$ is called a \textbf{point object of codimension $s$} if
\begin{enumerate}[label=\roman*)]
    \item $S_{\mathcal{D}}(P) \simeq P[s]$,
    \item $\Hom^{<0}(P,P) = 0$,
    \item $\Hom^0(P,P) = k(P)$,
\end{enumerate}
where $k(P)$ is a field (automatically a finite extension of the base field $k$).
\end{definition}

\begin{proposition}
Let $X$ be a smooth algebraic variety of dimension $n$ with ample canonical or anticanonical sheaf.  
Then an object $P \in D^b_{\mathrm{coh}}(X)$ is a point object if and only if
\[
P \cong \mathcal{O}_x[r], \qquad r \in \mathbb{Z},
\]
where $\mathcal{O}_x$ is the skyscraper sheaf of a closed point $x \in X$ (up to translation).
\end{proposition}

\begin{proof}
  Since $X$ has an ample invertible sheaf, it is projective. Any skyscraper sheaf of a closed point obviously satisfies the conditions of a point object
with codimension equal to the dimension of the variety.

Suppose now that for some $P \in D^b_{\mathrm{coh}}(X)$ we have that $P$ is a point object of codimension $s$. 
Let $\mathcal{H}^i$ be the cohomology sheaves of $P$.


From (i) we obtain $s = n$. From the Serre functor formula, we have
\[P \otimes \omega_X [n] \;\simeq\; P[s]\]
Because tensoring with an invertible sheaf is an exact functor on the abelian category of coherent sheaves, we can take cohomlogy sheaves
\[\cH^i(P\otimes\omega_X) \cong \cH^i(P)\otimes\omega_X \cong \cH^{i+t}(P)\]
If $t = s - n \neq 0$, then for any $i$ we can iterate this isomorphism to get that infinitely many $\cH^j(P)$ are nonzero, contradicting the boundedness of $P$. Thus $t=0$.


We also get that $\mathcal{H}^i \otimes \omega_X \cong \mathcal{H}^i$.
Since $\omega_X$ is either ample or antiample, it follows that
each $\mathcal{H}^i$ is a finite-length sheaf, i.e.\ its support consists of isolated points. This follows from examining the Hilbert polynomial of $\mathcal{H}^i \otimes \omega_X^{\otimes m}$ for $m \gg 0$.

Sheaves supported at different points are homologically orthogonal, so $P$ decomposes into a direct sum of components supported at single points.
By (iii), $P$ is indecomposable.

Now consider the spectral sequence computing $\Hom^m(P,P)$ from $\Ext^i(\mathcal{H}^j, \mathcal{H}^k)$:
\[
E_2^{p,q}
    = \bigoplus_{k-j=q} \Ext^p(\mathcal{H}^j, \mathcal{H}^k)
    \;\Longrightarrow\;
    \Hom^{p+q}(P,P).
\]
For any two finite-length sheaves supported at the same point,
there exists a nontrivial morphism from one to the other,
sending a generator of the first to the socle of the second.

Examining $\Hom^m(\mathcal{H}^j, \mathcal{H}^k)$ with minimal $k-j$,
we see that this nontrivial term survives to $E_\infty$.
By (ii), $k-j=0$, so all $\mathcal{H}^i$ vanish except one.
Thus $P$ is quasi-isomorphic to a single sheaf $\mathcal{H}^i[-i]$,
and (iii) then implies that $\mathcal{H}^i$ is a skyscraper sheaf.

Hence the skyscraper sheaves allow one to reconstruct the invertible sheaves on $X$.
\end{proof}

\begin{remark}[Homological orthogonality of skyscraper sheaves]
  
Each cohomology sheaf $\mathcal{H}^i(P)$ is supported on a finite set of points in $X$. Write 
\[
\operatorname{Supp}(\mathcal{H}^i(P)) = \{x_1,\dots,x_r\}.
\]
Let $\mathcal{H}^i_{x_j}$ denote the summand of $\mathcal{H}^i(P)$ supported at the single point $x_j$ (you get this by taking the subsheaf of sections vanishing outside $\{x_j\}$).

Then each $\mathcal{H}^i(P)$ decomposes canonically as
\[
\mathcal{H}^i(P) \;\cong\; \bigoplus_{j=1}^r \mathcal{H}^i_{x_j}.
\]

If two coherent sheaves $\mathcal{F},\mathcal{G}$ have disjoint supports, then
\[
\operatorname{Ext}^p_X(\mathcal{F},\mathcal{G}) = 0 \quad\text{for all } p.
\]

This is because Ext groups are computed locally — they vanish where the sheaves vanish together. Formally, for every open $U\subset X$,
\[
\mathcal{E}xt^p_X(\mathcal{F},\mathcal{G})|_U
\;\cong\;
\mathcal{E}xt^p_U(\mathcal{F}|_U,\mathcal{G}|_U),
\]
and the support of $\mathcal{E}xt^p_X(\mathcal{F},\mathcal{G})$ is contained in $\operatorname{Supp}(\mathcal{F}) \cap \operatorname{Supp}(\mathcal{G})$. So if that intersection is empty, the sheaf $\mathcal{E}xt^p_X(\mathcal{F},\mathcal{G})$ is zero; hence taking global sections gives $\operatorname{Ext}^p_X(\mathcal{F},\mathcal{G}) = 0$.
\end{remark}




\section{Appendix: Algebraic Geometry}
We collect some definitions and facts from algebraic geometry that are used in the main text. In particular, we discuss sheaf cohomology and Serre's affineness criterion. We also include a proof of the Ext-computation for closed immersions used in the spherical twist example. Finally, we review some of the technical definitions around stacks.

\subsection{Cohomology and affineness}
If $X = \Spec A$ is an affine scheme, then every quasi-coherent sheaf $\mathcal{F}$ on $X$ has no higher cohomology
\begin{align*}
H^p(X,\mathcal{F}) = 0 \quad \text{for } p > 0.
\end{align*} This is because quasi-coherent sheaves on affine schemes correspond to $A$-modules, and taking global sections corresponds to taking the module itself, which is an exact functor. In general, whenever a quasiseparated scheme $X$ has an open cover by affine schemes $U_i$, the \v{C}ech complex associated to this cover can be used to compute the cohomology of quasi-coherent sheaves on $X$. In particular, if $X$ can be covered by $m$ open affine sets then \begin{align*}
H^p(X,\mathcal{F}) = 0 \quad \text{for } p \geq m.
\end{align*}
It turns out that the vanishing of higher cohomology for all quasi-coherent sheaves characterizes affineness. This is known as Serre's affineness criterion.
\begin{theorem}[Serre's affineness criterion]
\label{theorem:serre-affine}
Let $X$ be a scheme. Assume that
\begin{enumerate}
\item $X$ is quasi-compact, and
\item for every quasi-coherent sheaf of ideals $\mathcal{I}\subset\mathcal{O}_X$ we have $H^1(X,\mathcal{I})=0$.
\end{enumerate}
Then $X$ is affine.
\end{theorem}

\begin{proof}
Let $x\in X$ be a closed point. Let $U\subset X$ be an affine open neighbourhood of $x$. 
Write $U=\Spec(A)$ and let $\mathfrak m\subset A$ be the maximal ideal corresponding to $x$. 
Set $Z = X\setminus U$ and $Z' = Z\cup\{x\}$. 
There are quasi-coherent sheaves of ideals $\mathcal{I},\mathcal{I}'$ cutting out the reduced closed subschemes $Z$ and $Z'$ respectively. 
Consider the short exact sequence
\[
0 \longrightarrow \mathcal{I}' \longrightarrow \mathcal{I} \longrightarrow \mathcal{I}/\mathcal{I}' \longrightarrow 0.
\]
Since $x$ is a closed point of $X$ and $x\notin Z$, we see that $\mathcal{I}/\mathcal{I}'$ is supported at $x$. 
In fact, the restriction of $\mathcal{I}/\mathcal{I}'$ to $U$ corresponds to the $A$-module $A/\mathfrak m$. 
Hence
\[
\Gamma(X,\mathcal{I}/\mathcal{I}') = A/\mathfrak m.
\]
Since by assumption $H^1(X,\mathcal{I}')=0$, there exists a global section 
$f\in\Gamma(X,\mathcal{I})$ mapping to the element $1\in A/\mathfrak m$ as a section of 
$\mathcal{I}/\mathcal{I}'$. 

Let $X_f = D_X(f)$ be the open subset of $X$ where $f$ is invertible.
Since the image of $f$ in $A / \mathfrak m$ equals 1, we have $f(x) \notin \mathfrak m_x$, equivalently, $f$ is invertible in the local ring $\mathcal O_{X, x}$ and so $x \in X_f$.

Moreover $X_f\subset U$ because on $Z = X\setminus U$, the section sheaf $\mathcal{I}$ vanishes because it cuts out $Z$. So $f\vert_Z = 0$, and hence $f$ is not invertible on $Z$. Thus $X_f\subset U$. This clearly implies that $X_f = D(f_A)$ where $f_A$ is the image of $f$ in $A$.

Consider the union
\[
W = \bigcup_{f\in\Gamma(X,\mathcal{O}_X)} X_f
\]
over all $f$ such that $X_f$ is affine. 
Obviously $W$ is open in $X$. 
By the arguments above, every closed point of $X$ is contained in $W$. 
The closed subset $X\setminus W$ of $X$ is also quasi-compact and so it has a closed point if it is nonempty. This would contradict the fact that all closed points are in $W$. Hence we conclude $X=W$.

Choose finitely many $f_1,\dots,f_n\in\Gamma(X,\mathcal{O}_X)$ such that 
\[
X = X_{f_1}\cup\cdots\cup X_{f_n},
\]
and such that each $X_{f_i}$ is affine. The finite cover above exists because $X$ is quasi-compact. First we argue that it suffices to show that 
$f_1,\dots,f_n$ generate the unit ideal in $\Gamma(X,\mathcal{O}_X)$. 

Suppose $X=\bigcup_i X_{f_i}$ and each $X_{f_i}$ affine, and
$(f_1,\dots,f_n)=\Gamma(X,\mathcal O_X)$. Let $A:=\Gamma(X,\mathcal O_X)$ and let $\varphi:X\to \operatorname{Spec} A$ be the canonical map. For any $f\in A$, $\varphi^{-1}(D(f))=X_f$.

If $(f_1,\dots,f_n)=A$, then $\{D(f_i)\}$ covers $\operatorname{Spec} A$. Since $\{X_{f_i}\}$ covers $X$ and each $X_{f_i}$ is affine, the restrictions $A_{f_i}\to \Gamma(X_{f_i},\mathcal O_X)$ are isomorphisms and they agree on overlaps $X_{f_if_j}$ (compatibility comes from functoriality of restriction). Therefore $\varphi$ is an isomorphism Zariski-locally on the cover $\{X_{f_i}\}$ and on the target cover $\{D(f_i)\}$. Since these cover $X$ and $\operatorname{Spec} A$, $\varphi$ is an isomorphism globally. Hence $X\simeq \operatorname{Spec} A$ is affine.

Now we show that $f_1,\dots,f_n$ generate the unit ideal in $\Gamma(X,\mathcal{O}_X)$. Consider the short exact sequence
\[
0 \longrightarrow \mathcal{F} \longrightarrow 
\mathcal{O}_X^{\oplus n} 
\xrightarrow{(f_1,\ldots,f_n)} 
\mathcal{O}_X \longrightarrow 0.
\]
The arrow defined by $f_1,\ldots,f_n$ is surjective since the opens $X_{f_i}$ cover $X$. 
Let $\mathcal{F}$ be the kernel of this surjective map. 
Observe that $\mathcal{F}$ has a filtration
\[
0 = \mathcal{F}_0 \subset \mathcal{F}_1 \subset \cdots \subset \mathcal{F}_n = \mathcal{F}
\]
such that each subquotient $\mathcal{F}_i/\mathcal{F}_{i-1}$ 
is isomorphic to a quasi-coherent sheaf of ideals. 
Namely, we can take $\mathcal{F}_i$ to be the intersection of $\mathcal{F}$ 
with the first $i$ direct summands of $\mathcal{O}_X^{\oplus n}$. 
The assumption of the lemma implies that 
$H^1(X,\mathcal{F}_i/\mathcal{F}_{i-1})=0$ for all $i$. 
This implies $H^1(X,\mathcal{F}_2)=0$, because it is sandwiched between 
$H^1(X,\mathcal{F}_1)$ and $H^1(X,\mathcal{F}_2/\mathcal{F}_1)$. 
Continuing in this way, we deduce that $H^1(X,\mathcal{F})=0$. 
Therefore, we conclude that the map
\[
\bigoplus_{i=1}^n \Gamma(X,\mathcal{O}_X)
\xrightarrow{(f_1,\ldots,f_n)} 
\Gamma(X,\mathcal{O}_X)
\]
is surjective, as desired.
\end{proof}

The statement can actually be upgraded to a relative affineness criterion. Recall that a morphism of schemes $f:X\to Y$ is \textbf{affine} if for every affine open subset $V\subset Y$, the preimage $f^{-1}(V)$ is an affine scheme. Equivalently, $f$ is affine if and only if the direct image sheaf $f_*\mathcal{O}_X$ is a quasi-coherent sheaf of algebras on $Y$ and $X$ is isomorphic to the relative Spec $\underline{\mathrm{Spec}}_Y(f_*\mathcal{O}_X)$.
\begin{theorem}
[Relative affineness criterion]
\label{theorem:relative-affine}
Let $f:X\to Y$ be a quasi-compact and quasi-separated morphism of schemes. Then the following are equivalent:
\begin{enumerate}
\item The morphism $f$ is affine.
\item For every quasi-coherent sheaf of ideals $\mathcal{I}\subset\mathcal{O}_X$, we have $R^1f_*\mathcal{I}=0$.
\end{enumerate}
\end{theorem}

\begin{theorem}[Hilbert polynomial and ampleness]
Let $X$ be projective over an algebraically closed field, $L$ an ample line bundle, and $0\neq\mathcal F$ a coherent sheaf with $d=\dim \operatorname{Supp}\mathcal F$.
Then the Hilbert function
\[
P_{\mathcal F}(m)\;:=\;\chi\big(\mathcal F\otimes L^{\otimes m}\big)
\]
agrees for $m\gg 0$ with a polynomial of degree exactly $d$, with positive leading coefficient.

In particular, for $m\gg 0$ one has $P_{\mathcal F}(m+1)>P_{\mathcal F}(m)$ if $d\ge 1$. Consequently, if $\mathcal F\simeq \mathcal F\otimes L$, then $d=0$ (so $\mathcal F$ has finite length).
\end{theorem}

\begin{proof}
By Grothendieck's theorem on Hilbert polynomials (or asymptotic Riemann--Roch),
$P_{\mathcal F}(m)$ is a polynomial for $m\gg 0$ whose degree equals
$\dim \operatorname{Supp}\mathcal F=d$.
More precisely, with $H=c_1(L)$ and writing $\operatorname{ch}(\mathcal F)=\sum_{i} \operatorname{ch}_i(\mathcal F)$,
\[
P_{\mathcal F}(m)
\;=\;
\int_X \operatorname{ch}(\mathcal F)\, e^{mH}\,\operatorname{td}(X)
\;=\;
\frac{m^{d}}{d!}\,\big(H^{d}\cdot \operatorname{ch}_{\dim X-d}(\mathcal F)\big)
\;+\;\text{lower powers of }m,
\]
and ampleness gives $H^{d}>0$ on $d$-dimensional cycles; since $\mathcal F\neq 0$,
the leading coefficient is positive.


A polynomial of degree $\ge 1$ with positive leading coefficient is eventually strictly increasing, hence
$P_{\mathcal F}(m+1)>P_{\mathcal F}(m)$ for all $m\gg 0$.

If $\mathcal F\simeq\mathcal F\otimes L$, then for all $m$
\[
\chi(\mathcal F\otimes L^{\otimes m})
\;=\;
\chi(\mathcal F\otimes L^{\otimes (m+1)})
\]
i.e. $P_{\mathcal F}(m)=P_{\mathcal F}(m+1)$.
By the monotonicity just proved, this forces $d=0$.
\end{proof}





\subsection{Koszul resolutions and Ext along a closed immersion}
Let $i: Z \hookrightarrow X$ be a closed immersion of smooth varieties of codimension $c$.
If $N_{Z/X}$ denotes the normal bundle, then for any coherent sheaves $F, G$ on $Z$,
there is a natural isomorphism
\[
\Ext^i_X(i_*F,\, i_*G)
\;\cong\;
\bigoplus_{p=0}^{c} \Ext^{i-p}_Z\big(F,\, G\otimes \wedge^p N_{Z/X}\big).
\]
We check this Zariski locally. Assume $X=\Spec A$, $Z=\Spec A/I$ where $I=(f_1,\dots,f_c)$ is a regular sequence since $Z$ is a smooth subvariety of codimension $c$. The conormal module is $I/I^2$, and $N^\vee\simeq I/I^2$, so $N\simeq (I/I^2)^\vee$. The Koszul complex $K(f_\bullet)$ is a free $A$-resolution of $A/I$:
\[
0\to \wedge^{c}A^{\oplus c}\xrightarrow{d}\cdots\xrightarrow{d}A^{\oplus c}\xrightarrow{(f_1,\dots,f_c)}A\to A/I\to 0.
\]

If $F,G$ are coherent on $Z$ (i.e. $A/I$-modules), then $i_*F,i_*G$ are the same modules regarded as $A$-modules with $I$ acting trivially.

We want to compute
\[
\Ext^i_A(i_*F,i_*G).
\]

First we need to resolve $i_*F$ by a free $A$-resolution using the Koszul complex. The Koszul complex for $f_1,\ldots,f_c$ is:
\[
K(f_\bullet):\qquad
0\to \wedge^{c}A^{c}\xrightarrow{d_c}\cdots
\xrightarrow{d_1}A\to 0,
\]
where $d_p$ acts by contraction with $f_1e_1+\cdots+f_ce_c$.

Tensor it with $i_*F$ (which is killed by $I$):
\[
K(f_\bullet)\otimes_A i_*F:
\quad
0\to i_*F\otimes\wedge^{c}A^{c}
\to \cdots
\to i_*F
\to 0.
\]
This is a projective resolution of $i_*F$ as an $A$-module. Now we apply $\Hom_A(-,\,i_*G)$.

Compute the cochain complex:
\[
\Hom_A(K(f_\bullet)\otimes i_*F,\;i_*G).
\]
whose $p$-th term is
\[
\Hom_A(i_*F\otimes\wedge^{p}A^{c},\;i_*G)
\cong
\Hom_{A/I}\!\big(F,\;G\otimes (\wedge^{p}A^{c})^{\!\vee}\big)
\]
because $I$ acts trivially on both sides, so we can reduce mod $I$.
Here $(\wedge^{p}A^{c})^{\!\vee}\cong \wedge^{p}(A^{c})^{\!\vee}$, which geometrically is $\wedge^{p}N_{Z/X}$.

So we have constructed a cochain complex $C^{\bullet}$ with terms
\[
C^{p} = \Hom_{A/I}\!\big(F,\,G\otimes \wedge^{p}N\big),
\qquad N=(I/I^{2})^{\!\vee}.
\]
The differential $d$ in the Koszul complex $K(f_\bullet): \wedge^{p}A^{c}\to\wedge^{p-1}A^{c}$ induces, after applying $\Hom$, a map $d^{*}: C^{p-1}\to C^{p}$. Now $d_p\otimes1$ itself is "multiplication by the $f_i$" acting on the $\wedge^pA^c$-factor. But both $i_*F$ and $i_*G$ are annihilated by $I=(f_1,\dots,f_c)$, so multiplying by any $f_i$ on their modules gives zero. Hence $d_p\otimes1$ is zero after applying $\Hom_A(-,i_*G)$ and so in fact this differential $d^*$ is zero.

So the complex $C^{\bullet}$ has zero differential, i.e. it is just a direct sum of its terms:
\[C^{\bullet} \cong \bigoplus_{p=0}^{c} C^{p}[-p]\]
Replacing $F,G$ by injective (or projective) resolutions over $A/I$,
you can promote this chain-level equality to an equality of derived objects:
\[
R\Hom_A(i_*F,i_*G)
\;\simeq\;
\bigoplus_{p=0}^c
R\Hom_{A/I}\!\big(F,\,G\otimes\wedge^p N\big)[-p].
\]
Taking $H^i$ of both sides gives the desired formula:

\begin{proposition}[Ext along a closed immersion]\label{prop:ext-closed-immersion}
Let $i: Z \hookrightarrow X$ be a closed immersion of smooth varieties of codimension $c$, and let $N_{Z/X}$ be the normal bundle. For any coherent sheaves $F, G$ on $Z$, there is a natural isomorphism
\[
\Ext_X^{\,i}(i_*F,i_*G)
\;\cong\;
\bigoplus_{p=0}^c
\Ext_{Z}^{\,i-p}\big(F,\,G\otimes\wedge^pN_{Z/X}\big).
\]
\end{proposition}



\begin{remark}[Spectral sequence version]
In general, each $C^{p}$ can have its own internal derived functor $\Ext^q_{A/I}(F,G\otimes\wedge^{p}N)$ if we replace $F$ or $G$ by injective resolutions over $A/I$. Hence we really have a double complex
\[
C^{p,q} = \Ext^q_{A/I}(F,G\otimes\wedge^{p}N),
\]
with horizontal differential (Koszul) and vertical differential (Exts). There is a spectral sequence of a double complex:
\[
E_1^{p,q}
=\Ext^q_{A/I}(F,\,G\otimes\wedge^{p}N)
\;\Longrightarrow\;
\Ext^{p+q}_A(i_*F,i_*G).
\]
However, in our case the horizontal differential is zero, so the spectral sequence degenerates at $E_1$ and we get the direct sum formula above.
\end{remark}

\subsection{Quotient stack}
Let $\mathcal{S}$ be a category and $p:\mathcal{X}\to\mathcal{S}$ be a functor of categories.
We visualize this data as
\[
  \begin{tikzcd}
    \mathcal{X} \arrow[d, "p"'] & a \arrow[r, "\alpha"] \arrow[d] & b \arrow[d] \\
    \mathcal{S} & S \arrow[r, "f"'] & T
  \end{tikzcd}
\]
where the lower case letters $a,b$ are objects of $\mathcal{X}$ and the upper case letters $S,T$
are objects of $\mathcal{S}$. We say that $a$ is over $S$ and that a morphism $\alpha: a\to b$ is
over $f:S\to T$.

\begin{definition}[Prestacks]\label{def:prestacks}
  A functor $p:\mathcal{X}\to\mathcal{S}$ is a \textbf{prestack over a category $\mathcal{S}$} if
  \begin{enumerate}
    \item[(1)] (\textbf{pullbacks exist}) for every diagram
          \[
            \begin{tikzcd}
              a \arrow[d] \arrow[r, dashed] & b \arrow[d] \\
              S \arrow[r] & T
            \end{tikzcd}
          \]
          of solid arrows, there exists a morphism $a\to b$ over $S\to T$; and

    \item[(2)] (\textbf{universal property for pullbacks}) for every diagram
          \[
            \begin{tikzcd}
              a \arrow[d]
              \arrow[r, dashed]
              \arrow[rr, bend left=15] &
              b \arrow[d] \arrow[r] &
              c \arrow[d] \\
              R \arrow[r] & S \arrow[r] & T
            \end{tikzcd}
          \]
          of solid arrows, there exists a unique arrow $a\to b$ over $R\to S$ filling in the diagram.
  \end{enumerate}
  Prestacks are also referred to as \textbf{categories fibered in groupoids}.
\end{definition}

\begin{definition}[Fiber categories]\label{def:fibercat}
  If $\mathcal{X}$ is a prestack over $\mathcal{S}$, the \textbf{fiber category}
  $\mathcal{X}(S)$ over $S\in\mathcal{S}$ is the category of objects in $\mathcal{X}$ over $S$
  with morphisms over $\mathrm{id}_S$.
\end{definition}

Given an action of an algebraic group $G$ on a scheme $X$, the \textbf{quotient prestack} $[X/G]^{\mathrm{pre}}$ is the prestack whose fiber category
$[X/G]^{\mathrm{pre}}(S)$ over a scheme $S$ is the quotient groupoid (or the moduli groupoid of orbits) $[X(S)/G(S)]$
This will not satisfy the gluing axioms of a stack; even when the action is free,
the quotient functor $\mathrm{Sch} \to \mathrm{Sets}$ defined by $S \mapsto X(S)/G(S)$ is not a sheaf
in general. Put another way, we define:
\begin{definition}[Quotient prestacks]
  Let $G \to S$ be a smooth affine group scheme acting on a scheme $U$ over $S$.
  The \textbf{quotient prestack} $[U/G]^{\mathrm{pre}}$ of an action of a smooth affine group scheme $G \to S$
  on an $S$-scheme $U$ is the category over $\mathrm{Sch}/S$ consisting of pairs $(T,u)$ where $T$ is an $S$-scheme
  and $u \in U(T)$. An element $g \in G(T')$ acts by $(T',u') \to (T,u)$ via the data of a map $f:T'\to T$ of
  $S$-schemes and an element $g \in G(T')$ such that $f^*u = g \cdot u'$. Note that the fiber category
  $[U(T)/G(T)]$ is identified with the quotient groupoid.
\end{definition}
It turns out that the stackification of $[U/G]^{\mathrm{pre}}$ is the quotient stack $[U/G]$, hence the name is justified.

\begin{definition}[Quotient stacks]
  The \textbf{quotient stack} $[U/G]$ is the prestack over $\mathrm{Sch}/S$ consisting of diagrams
  \[
    \begin{tikzcd}
      P \arrow[r] \arrow[d] & U \\
      T
    \end{tikzcd}
  \]
  where $P \to T$ is a principal $G$-bundle and $P \to U$ is a $G$-equivariant morphism of $S$-schemes.

  A morphism
  \[
    (T' \;\longleftarrow\; P' \;\longrightarrow\; U) \;\longrightarrow\;
    (T \;\longleftarrow\; P \;\longrightarrow\; U)
  \]
  consists of a morphism $T' \to T$ and a $G$-equivariant morphism $P' \to P$ of schemes such that the diagram
  \[
    \begin{tikzcd}
      P' \arrow[r] \arrow[d] \arrow[rr, bend left=20] &
      P \arrow[r] \arrow[d] &
      U \\
      T' \arrow[r] & T &
      \arrow[from=1-1, to=2-1]
      \arrow[from=1-2, to=2-2]
    \end{tikzcd}
  \]
  is commutative and the left square is cartesian.
\end{definition}

\begin{remark}[General dictionary for quotient stacks and equivariant geometry]
  There is a general dictionary relating the stack-theoretic concepts and the equivariant geometry of $X$. Here $G$ is a reductive algebraic group acting on a scheme $X$ and $[X/G]$ is the quotient stack.
  \begin{center}
    \begin{tabular}{|l|l|}
      \hline
      \textbf{Geometry of $[X/G]$} & \textbf{$G$-equivariant geometry of $X$}                   \\[1ex]
      \hline
      $\mathbb{C}$-point $\bar{x} \in [X/G]$
                                   & orbit $Gx$ of $\mathbb{C}$-point $x \in X$                 \\
                                   & (with $\bar{x}$ the image of $x$ under $X \to [X/G]$)      \\[1ex]
      \hline
      automorphism group $\mathrm{Aut}(\bar{x})$
                                   & stabilizer $G_x$                                           \\[1ex]
      \hline
      function $f \in \Gamma([X/G],\mathcal{O}_{[X/G]})$
                                   & $G$-equivariant function $f \in \Gamma(X,\mathcal{O}_X)^G$ \\[1ex]
      \hline
      map $[X/G] \to Y$ to a scheme $Y$
                                   & $G$-equivariant map $X \to Y$                              \\[1ex]
      \hline
      line bundle
                                   & $G$-equivariant line bundle (or $G$-linearization)         \\[1ex]
      \hline
      quasi-coherent sheaf
                                   & $G$-equivariant quasi-coherent sheaf                       \\[1ex]
      \hline
      tangent space $T_{[X/G],\bar{x}}$
                                   & normal space $T_{X,x}/T_{Gx,x}$ to the orbit               \\[1ex]
      \hline
      coarse moduli space $[X/G] \to Y$
                                   & geometric quotient $X \to Y$                               \\[1ex]
      \hline
      good moduli space $[X/G] \to Y$
                                   & good GIT quotient $X \to Y$                                \\[1ex]
      \hline
    \end{tabular}
  \end{center}
\end{remark}

A stack over a site $\mathcal{S}$ is a prestack $\mathcal{X}$ where the objects and morphisms glue uniquely in the Grothendieck topology of $\mathcal{S}$.

\begin{definition}
  [Stack] \label{def:stack}
  A \textbf{stack} $\mathcal{X}$ over a site $\mathcal{C}$ is a prestack over $\mathcal{C}$ satisfying the following descent conditions:
  \begin{itemize}
    \item (Descent for morphisms) For any $U\in\mathcal{C}$, any covering $\{f_i:U_i\to U\}$, and any $x,y\in\mathcal{X}(U)$, the presheaf
          \[
            \underline{\mathrm{Hom}}(x,y): (V\to U) \mapsto \mathrm{Hom}_{\mathcal{X}(V)}(f^*x,f^*y)
          \]
          is a sheaf on $\mathcal{C}/U$.
    \item (Descent for objects) For any $U\in\mathcal{C}$, any covering $\{f_i:U_i\to U\}$, and any descent datum $(x_i,\phi_{ij})$ relative to $\{f_i:U_i\to U\}$, there exists an object $x\in\mathcal{X}(U)$ and isomorphisms $\psi_i:f_i^*x\xrightarrow{\sim} x_i$ such that $\phi_{ij}\circ f_j^*\psi_j = f_i^*\psi_i$.
  \end{itemize}
\end{definition}

\begin{definition}[Substack]
  A \textbf{substack} $\mathcal{Y}\subseteq \mathcal{X}$ is given by:
  \begin{itemize}
    \item For each $U\in\mathcal{C}$, a full subcategory $\mathcal{Y}(U)\subseteq \mathcal{X}(U)$.
    \item Stability under restriction:
          If $y\in \mathcal{Y}(U)$ and $f:V\to U$ is a morphism in the site, then the pullback $f^*y \in \mathcal{X}(V)$ must lie in $\mathcal{Y}(V)$.
    \item Stack condition:
          The collection $\mathcal{Y}$ is itself a stack (i.e. satisfies descent for objects and morphisms).
  \end{itemize}
\end{definition}

\begin{definition}[Open and closed substacks]\label{def:open-closed-substacks}
  A substack $\mathcal{T} \subseteq \mathcal{X}$ of a stack over $\mathrm{Sch}_{\mathrm{\acute{e}t}}$
  is called an \textbf{open substack} (resp.\ \textbf{closed substack}) if the inclusion
  $\mathcal{T} \to \mathcal{X}$ is representable by schemes and an open immersion (resp.\ closed immersion).
\end{definition}

\section{References}
NOTES ON GIT AND SYMPLECTIC REDUCTION FOR
BUNDLES AND VARIETIES
by R. P. THOMAS

Alper Moduli

Segal paper

Stacks project

Bondal Orlov paper

Algebra V Encyclopedia of Mathematical Sciences
\end{document}