\documentclass[12pt]{article}
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{tikz}
\usepackage{/Users/songye03/Desktop/math_tex/style/quiver}
\usepackage{/Users/songye03/Desktop/math_tex/style/scribe}

\begin{document}
Songyu Ye

\today

This is a note for my talk with Allen on May 3, 2024. We discussed divisors on toric varieties
and Schubert varieties on the affine Grassmannian.

\section{Weil divisors}
First we state some facts about Weil divisors in a general setting. 
Let $X$ be Noetherian, integral, separated, and regular in codimension 1 scheme (any 
smooth projective variety over $\C$ will do).  
\begin{definition}
    A \red{prime divisor} $D$ on $X$ is a codimension 1 subvariety of $X$.
    A \red{Weil divisor} $D$ on $X$ is a formal sum $D = \sum n_i D_i$ where $D_i$ are prime divisors.
    A \red{principal divisor} is a divisor of the form $\div(f)$ for some $f\in K(X)^*$. 
    The \red{class group} $\Cl(X)$ is the group of Weil divisors modulo principal divisors.
\end{definition}

\begin{lemma}
    Let $X$ as above and let $Z$ be a prime divisor on $X$, $U = X\setminus Z$.
     Then there is an exact sequence
    \begin{align*}
        \Z\to \Cl(X) \to \Cl(U) \to 0
    \end{align*}
    where the first map is given by $n\mapsto n[Z]$ and 
    the second map is given by $D\mapsto D|_U$.
\end{lemma}

\begin{proof}
    The map $\Cl(X)\to \Cl(U)$ is surjective because any divisor on $U$ extends to a divisor on $X$ by taking the closure.
    The kernel of $\Cl(X)\to \Cl(U)$ is the principal divisors supported on $Z$.
    This gives the exact sequence. \red{There is something to worry about 
    because these statements are about divisors, not divisor classes.}
\end{proof}

\begin{example}
    \begin{enumerate}
        \item $\Cl(\A^n) = 0$ because every prime divisor on $\A^n$ is cut out by the vanishing of a function.
        \item $\Cl(\P^n) = \Z$ generated by the hyperplane class.
        \item $\Cl(U) = 0$ for any open affine subset. This is a consequence of 
        the more general statement that $A(U) = \Z U$ for any open affine subset $U$.
    \end{enumerate}
\end{example}

\section{Affine toric varieties}
Let $X = X(\sigma)$ be an affine toric variety associated to a cone.
Consider the complement of all $T$-invariant prime divisors on $X$.
There is an exact sequence \begin{align*}
    0 \to K \to \Z^s \to \Cl(X) \to 0
\end{align*} where the kernel $K$ can be identified with those principal divisors
supported on the invariant divisors. Moreover if $f$ is a rational function 
for which $\div(f)$ is supported on the invariant divisors, then $f$ has no zeros or poles
on $T$ and is therefore equal to $\lambda\chi^u$ for some $\lambda\in \C^*$ and $u\in M$.
Therefore \begin{align*}
    M \to \Z^s \to \Cl(X) \to 0
\end{align*} is exact. If $X = X(F)$ where $F$ spans the lattice then \begin{align*}
    0 \to M \to \Z^s \to \Cl(X) \to 0
\end{align*} is exact.

\begin{lemma}
    Let $X = X(\sigma)$ be an affine toric variety. Let $v_\tau$ 
    be the primitive generator of the ray $\tau$ in $\sigma$.
    Then $\ord_{D_\tau}(\chi^u) = \langle u, v_\tau\rangle$ and \begin{align*}
        \div(\chi^u) = \sum_{\tau\in \sigma(1)} \langle u, v_\tau\rangle D_\tau.
    \end{align*}
\end{lemma}

\begin{proof}
    Work locally on the open set $U_\tau = \C\times \C^{n-1}$ where $D_\tau$ is the zero section.
    Then ignore the $\C^*$ factors and reduce to $v=1$, $N = M = \Z$.
    Then $\chi^u$ is precisely the monomial $z^u$ which 
    has order of vanishing $u$.
\end{proof}

\section{Cartier divisors}
We now turn to the study of Cartier divisors on toric varieties.

If $X$ is normal, every Cartier divisor $D$ determines a Weil divisor $\sum \ord_D(V)[V]$.
The question we consider is which Weil divisors on a toric variety are Cartier.

\hfill

In the affine case, the answer is those which are principal. 
It is enough to classify all fractional ideals $I \subset K(X)$ which are $T$-invariant.

This is because we are dealing with affine varieties and 
moreover every Weil divisor has a $T$-invariant representative. The second fact is not quite 
obvious but the way to think about it is to take some 
\end{document}